import{s as be,v as Re,B as ae,C as de,h as x,d as y,j as b,k as p,i as Y,w as O,x as He,y as Xe,z as Ye,f as F,g as R,D as ut,u as Ie,o as We,p as ze,l as ft,m as ct,E as G,n as Bt,F as Me,G as Ge,a as ee,c as te,H as _e,I as Qe,e as me,J as Ke,K as Mt,r as Pe}from"../chunks/scheduler.7d5d85ff.js";import{S as we,i as ke,a as q,t as X,b as se,d as oe,m as le,e as re,g as De,c as Ue}from"../chunks/index.deab6082.js";import{w as gt}from"../chunks/index.efd249ef.js";function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const Lt=!0,bi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Lt},Symbol.toStringTag,{value:"Module"}));function Ze(t){let e,i;return{c(){e=ae("pattern"),i=ae("circle"),this.h()},l(s){e=de(s,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var n=x(e);i=de(n,"circle",{fill:!0,cx:!0,cy:!0,r:!0}),x(i).forEach(y),n.forEach(y),this.h()},h(){b(i,"fill","#AAAAAA"),b(i,"cx","0"),b(i,"cy","0"),b(i,"r","1"),b(e,"id","dots"),b(e,"x","0"),b(e,"y","0"),b(e,"width","20"),b(e,"height","20"),b(e,"patternUnits","userSpaceOnUse")},m(s,n){Y(s,e,n),O(e,i)},d(s){s&&y(e)}}}function Ot(t){let e,i,s,n,l,a,r,o,u=t[2]&&Ze();const f=t[4].default,d=Re(f,t,t[3],null);return{c(){e=ae("svg"),i=ae("defs"),u&&u.c(),s=ae("filter"),n=ae("feDropShadow"),l=ae("g"),a=ae("rect"),r=ae("g"),d&&d.c(),this.h()},l(v){e=de(v,"svg",{style:!0,xmlns:!0});var c=x(e);i=de(c,"defs",{});var m=x(i);u&&u.l(m),s=de(m,"filter",{id:!0,x:!0,y:!0,width:!0,height:!0});var I=x(s);n=de(I,"feDropShadow",{dx:!0,dy:!0,stdDeviation:!0,"flood-color":!0,"flood-opacity":!0}),x(n).forEach(y),I.forEach(y),m.forEach(y),l=de(c,"g",{id:!0,filter:!0});var S=x(l);a=de(S,"rect",{id:!0,width:!0,height:!0,fill:!0}),x(a).forEach(y),r=de(S,"g",{id:!0});var _=x(r);d&&d.l(_),_.forEach(y),S.forEach(y),c.forEach(y),this.h()},h(){b(n,"dx","0"),b(n,"dy","0"),b(n,"stdDeviation","0.5"),b(n,"flood-color","#000000"),b(n,"flood-opacity","0.5"),b(s,"id","shadow"),b(s,"x","-50%"),b(s,"y","-50%"),b(s,"width","200%"),b(s,"height","200%"),b(a,"id","canvas-bg"),b(a,"width","100%"),b(a,"height","100%"),b(a,"fill","url(#dots)"),b(r,"id","canvas-content"),b(l,"id","canvas"),b(l,"filter","url(#shadow)"),p(e,"position","absolute"),p(e,"top","0"),p(e,"left","0"),p(e,"width",t[0]+"px"),p(e,"height",t[1]+"px"),b(e,"xmlns","http://www.w3.org/2000/svg")},m(v,c){Y(v,e,c),O(e,i),u&&u.m(i,null),O(i,s),O(s,n),O(e,l),O(l,a),O(l,r),d&&d.m(r,null),o=!0},p(v,[c]){v[2]?u||(u=Ze(),u.c(),u.m(i,s)):u&&(u.d(1),u=null),d&&d.p&&(!o||c&8)&&He(d,f,v,v[3],o?Ye(f,v[3],c,null):Xe(v[3]),null),(!o||c&1)&&p(e,"width",v[0]+"px"),(!o||c&2)&&p(e,"height",v[1]+"px")},i(v){o||(q(d,v),o=!0)},o(v){X(d,v),o=!1},d(v){v&&y(e),u&&u.d(),d&&d.d(v)}}}function Tt(t,e,i){let{$$slots:s={},$$scope:n}=e,{width:l=0}=e,{height:a=0}=e,{hasBackground:r=!1}=e;return t.$$set=o=>{"width"in o&&i(0,l=o.width),"height"in o&&i(1,a=o.height),"hasBackground"in o&&i(2,r=o.hasBackground),"$$scope"in o&&i(3,n=o.$$scope)},[l,a,r,n,s]}class At extends we{constructor(e){super(),ke(this,e,Tt,Ot,be,{width:0,height:1,hasBackground:2})}}const ne=gt([]),ye=gt([]),J=24,Pt=4,Ee=100,ge=J*Pt;var xt={exports:{}};(function(t){var e=(()=>{var i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(D,g,k)=>g in D?i(D,g,{enumerable:!0,configurable:!0,writable:!0,value:k}):D[g]=k,u=(D,g)=>{for(var k in g||(g={}))a.call(g,k)&&o(D,k,g[k]);if(l)for(var k of l(g))r.call(g,k)&&o(D,k,g[k]);return D},f=(D,g)=>{for(var k in g)i(D,k,{get:g[k],enumerable:!0})},d=(D,g,k,V)=>{if(g&&typeof g=="object"||typeof g=="function")for(let H of n(g))!a.call(D,H)&&H!==k&&i(D,H,{get:()=>g[H],enumerable:!(V=s(g,H))||V.enumerable});return D},v=D=>d(i({},"__esModule",{value:!0}),D),c=(D,g,k)=>(o(D,typeof g!="symbol"?g+"":g,k),k),m={};f(m,{DEFAULT_OPTIONS:()=>_,DEFAULT_UUID_LENGTH:()=>S,default:()=>B});var I="5.0.3",S=6,_={dictionary:"alphanum",shuffle:!0,debug:!1,length:S,counter:0},N=class{constructor(g={}){c(this,"counter"),c(this,"debug"),c(this,"dict"),c(this,"version"),c(this,"dictIndex",0),c(this,"dictRange",[]),c(this,"lowerBound",0),c(this,"upperBound",0),c(this,"dictLength",0),c(this,"uuidLength"),c(this,"_digit_first_ascii",48),c(this,"_digit_last_ascii",58),c(this,"_alpha_lower_first_ascii",97),c(this,"_alpha_lower_last_ascii",123),c(this,"_hex_last_ascii",103),c(this,"_alpha_upper_first_ascii",65),c(this,"_alpha_upper_last_ascii",91),c(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),c(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),c(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),c(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),c(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),c(this,"log",(...E)=>{const U=[...E];if(U[0]=`[short-unique-id] ${E[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...U)}),c(this,"setDictionary",(E,U)=>{let L;if(E&&Array.isArray(E)&&E.length>1)L=E;else{L=[];let j;this.dictIndex=j=0;const Z=`_${E}_dict_ranges`,W=this._dict_ranges[Z];Object.keys(W).forEach(ie=>{const ve=ie;for(this.dictRange=W[ve],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=j=this.lowerBound;this.lowerBound<=this.upperBound?j<this.upperBound:j>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?j+=1:j-=1)L.push(String.fromCharCode(this.dictIndex))})}U&&(L=L.sort(()=>Math.random()-.5)),this.dict=L,this.dictLength=this.dict.length,this.setCounter(0)}),c(this,"seq",()=>this.sequentialUUID()),c(this,"sequentialUUID",()=>{let E,U,L="";E=this.counter;do U=E%this.dictLength,E=Math.trunc(E/this.dictLength),L+=this.dict[U];while(E!==0);return this.counter+=1,L}),c(this,"rnd",(E=this.uuidLength||S)=>this.randomUUID(E)),c(this,"randomUUID",(E=this.uuidLength||S)=>{let U,L,j;if(E===null||typeof E>"u"||E<1)throw new Error("Invalid UUID Length Provided");for(U="",j=0;j<E;j+=1)L=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,U+=this.dict[L];return U}),c(this,"fmt",(E,U)=>this.formattedUUID(E,U)),c(this,"formattedUUID",(E,U)=>{const L={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return E.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,Z=>{const W=Z.slice(0,2),ie=parseInt(Z.slice(2),10);return W==="$s"?L[W]().padStart(ie,"0"):W==="$t"&&U?L[W](ie,U):L[W](ie)})}),c(this,"availableUUIDs",(E=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,E).toFixed(0))),c(this,"approxMaxBeforeCollision",(E=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*E).toFixed(20))),c(this,"collisionProbability",(E=this.availableUUIDs(this.uuidLength),U=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(E)/this.availableUUIDs(U)).toFixed(20))),c(this,"uniqueness",(E=this.availableUUIDs(this.uuidLength))=>{const U=parseFloat((1-this.approxMaxBeforeCollision(E)/E).toFixed(20));return U>1?1:U<0?0:U}),c(this,"getVersion",()=>this.version),c(this,"stamp",(E,U)=>{const L=Math.floor(+(U||new Date)/1e3).toString(16);if(typeof E=="number"&&E===0)return L;if(typeof E!="number"||E<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const j=E-9,Z=Math.round(Math.random()*(j>15?15:j)),W=this.randomUUID(j);return`${W.substring(0,Z)}${L}${W.substring(Z)}${Z.toString(16)}`}),c(this,"parseStamp",(E,U)=>{if(U&&!/t0|t[1-9]\d{1,}/.test(U))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const L=U?U.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,Z=>{const W={$r:ue=>[...Array(ue)].map(()=>"r").join(""),$s:ue=>[...Array(ue)].map(()=>"s").join(""),$t:ue=>[...Array(ue)].map(()=>"t").join("")},ie=Z.slice(0,2),ve=parseInt(Z.slice(2),10);return W[ie](ve)}).replace(/^(.*?)(t{8,})(.*)$/g,(Z,W,ie)=>E.substring(W.length,W.length+ie.length)):E;if(L.length===8)return new Date(parseInt(L,16)*1e3);if(L.length<10)throw new Error("Stamp length invalid");const j=parseInt(L.substring(L.length-1),16);return new Date(parseInt(L.substring(j,j+8),16)*1e3)}),c(this,"setCounter",E=>{this.counter=E});const k=u(u({},_),g);this.counter=0,this.debug=!1,this.dict=[],this.version=I;const{dictionary:V,shuffle:H,length:A,counter:Q}=k;return this.uuidLength=A,this.setDictionary(V,H),this.setCounter(Q),this.debug=k.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength} and counter set to ${this.counter}`),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this),this}};c(N,"default",N);var B=N;return v(m)})();t.exports=e.default,typeof window<"u"&&(e=e.default)})(xt);const Be="_canvas_";function qt(t){let e,i;const s=t[6].default,n=Re(s,t,t[5],null);return{c(){e=F("div"),n&&n.c(),this.h()},l(l){e=R(l,"DIV",{id:!0,style:!0,class:!0});var a=x(e);n&&n.l(a),a.forEach(y),this.h()},h(){b(e,"id",t[3]),p(e,"position","relative"),p(e,"top","0"),p(e,"left","0"),p(e,"width",t[1]+"px"),p(e,"height",t[2]+"px"),p(e,"background",t[0]),b(e,"class","nodecanvas svelte-3ffb0y")},m(l,a){Y(l,e,a),n&&n.m(e,null),i=!0},p(l,[a]){n&&n.p&&(!i||a&32)&&He(n,s,l,l[5],i?Ye(s,l[5],a,null):Xe(l[5]),null),(!i||a&8)&&b(e,"id",l[3]),(!i||a&2)&&p(e,"width",l[1]+"px"),(!i||a&4)&&p(e,"height",l[2]+"px"),(!i||a&1)&&p(e,"background",l[0])},i(l){i||(q(n,l),i=!0)},o(l){X(n,l),i=!1},d(l){l&&y(e),n&&n.d(l)}}}function Vt(t,e,i){let s,{$$slots:n={},$$scope:l}=e,{backgroundColor:a="rgba(230,230,230,0.1)"}=e,{owningNode:r=""}=e,{width:o=0}=e,{height:u=0}=e;const f=ne.subscribe(d=>{});return ut(()=>{f()}),t.$$set=d=>{"backgroundColor"in d&&i(0,a=d.backgroundColor),"owningNode"in d&&i(4,r=d.owningNode),"width"in d&&i(1,o=d.width),"height"in d&&i(2,u=d.height),"$$scope"in d&&i(5,l=d.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&i(3,s=Be+r)},[a,o,u,s,r,l,n]}class pt extends we{constructor(e){super(),ke(this,e,Vt,qt,be,{backgroundColor:0,owningNode:4,width:1,height:2})}}function jt(t){let e;return{c(){e=ae("path"),this.h()},l(i){e=de(i,"path",{stroke:!0,fill:!0}),x(e).forEach(y),this.h()},h(){b(e,"stroke","gray"),b(e,"fill","transparent")},m(i,s){Y(i,e,s),t[6](e)},p:Ie,i:Ie,o:Ie,d(i){i&&y(e),t[6](null)}}}function Ft(t,e,i){var d,v,c,m;let{edge:s}=e,n=(d=s.from)==null?void 0:d.x,l=(v=s.from)==null?void 0:v.y,a=(c=s.to)==null?void 0:c.x,r=(m=s.to)==null?void 0:m.y,o;We(()=>{s.from&&s.to&&o.setAttribute("d",u(a,r,n,l))});const u=(I,S,_,N,B=!0)=>{if(B){let g=Math.abs(I-_)*.675,k=_-g,V=I+g;return`M${_} ${N} C ${k} ${N} ${V} ${S} ${I} ${S}`}else{let g=Math.abs(S-N)*.675,k=N-g,V=S+g;return`M${_} ${N} C ${_} ${k} ${I} ${V} ${I} ${S}`}};function f(I){ze[I?"unshift":"push"](()=>{o=I,i(0,o)})}return t.$$set=I=>{"edge"in I&&i(1,s=I.edge)},t.$$.update=()=>{var I,S,_,N;t.$$.dirty&63&&o&&s.from&&s.to&&(i(2,n=(I=s.from)==null?void 0:I.x),i(3,l=(S=s.from)==null?void 0:S.y),i(4,a=(_=s.to)==null?void 0:_.x),i(5,r=(N=s.to)==null?void 0:N.y),o.setAttribute("d",u(n,l,a,r)))},[o,s,n,l,a,r,f]}class _t extends we{constructor(e){super(),ke(this,e,Ft,jt,be,{edge:1})}}var he=(t=>(t.None="none",t.Top="top",t.TopRight="top-right",t.Right="right",t.BottomRight="bottom-right",t.Bottom="bottom",t.BottomLeft="bottom-left",t.Left="left",t.TopLeft="top-left",t))(he||{}),M=(t=>(t.Start="start",t.End="end",t))(M||{});const Rt=t=>"clientX"in t,Se=(t,e)=>{var l,a;const i=Rt(t),s=i?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,n=i?t.clientY:(a=t.touches)==null?void 0:a[0].clientY;return{x:s-((e==null?void 0:e.left)??0),y:n-((e==null?void 0:e.top)??0)}},Ce=(t,e)=>e===M.Start?{x:t.position.x+J/2,y:t.position.y+J/2}:e===M.End?{x:t.position.x+t.size.width-J/2,y:t.position.y+t.size.height-J/2}:{x:0,y:0},$e=(t,e)=>{for(const i of t){if(i.fromId&&i.fromType){const s=e.find(n=>n.id===i.fromId);if(s){const n=Ce(s,i.fromType);i.from=n}}if(i.toId&&i.toType){const s=e.find(n=>n.id===i.toId);if(s){const n=Ce(s,i.toType);i.to=n}}}return t},Ht=t=>{let e=!1;return"which"in t?e=t.which==3:"button"in t&&(e=t.button==2),e},mt=()=>({position:{x:10,y:10},size:{width:160,height:60},data:{label:""},startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0});function Xt(t){let e,i=t[3].toString()+"",s,n,l;return{c(){e=F("div"),s=ft(i),this.h()},l(a){e=R(a,"DIV",{class:!0,role:!0,style:!0,tabindex:!0});var r=x(e);s=ct(r,i),r.forEach(y),this.h()},h(){b(e,"class","p-0"),b(e,"role","button"),p(e,"height",t[1]+"px"),p(e,"border",(t[0].selected?2:1)+"px solid "+(t[0].selected?"red":"black")),p(e,"user-select","none"),p(e,"box-sizing","border-box"),b(e,"tabindex","0")},m(a,r){Y(a,e,r),O(e,s),n||(l=[G(e,"mousedown",t[5]),G(e,"mouseup",t[6]),G(e,"mouseenter",t[7])],n=!0)},p(a,[r]){r&8&&i!==(i=a[3].toString()+"")&&Bt(s,i),r&2&&p(e,"height",a[1]+"px"),r&1&&p(e,"border",(a[0].selected?2:1)+"px solid "+(a[0].selected?"red":"black"))},i:Ie,o:Ie,d(a){a&&y(e),n=!1,Me(l)}}}function Yt(t,e,i){let{data:s}=e,{edgelinkSize:n=0}=e,{node:l}=e,{type:a=M.Start}=e;const r=Ge(),o=d=>r("linkstart",{node:l,type:a,event:d}),u=d=>r("linkend",{node:l,type:a,event:d}),f=d=>r("linkoverlap",{node:l,type:a,event:d});return t.$$set=d=>{"data"in d&&i(0,s=d.data),"edgelinkSize"in d&&i(1,n=d.edgelinkSize),"node"in d&&i(2,l=d.node),"type"in d&&i(3,a=d.type)},[s,n,l,a,r,o,u,f]}class et extends we{constructor(e){super(),ke(this,e,Yt,Xt,be,{data:0,edgelinkSize:1,node:2,type:3})}}function Wt(t){let e,i,s,n,l,a,r,o,u,f,d,v,c;const m=t[8].default,I=Re(m,t,t[7],null);return{c(){e=F("div"),i=F("div"),I&&I.c(),s=ee(),n=F("div"),l=ee(),a=F("div"),r=ee(),o=F("div"),u=ee(),f=F("div"),this.h()},l(S){e=R(S,"DIV",{style:!0});var _=x(e);i=R(_,"DIV",{style:!0});var N=x(i);I&&I.l(N),N.forEach(y),s=te(_),n=R(_,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),x(n).forEach(y),l=te(_),a=R(_,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),x(a).forEach(y),r=te(_),o=R(_,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),x(o).forEach(y),u=te(_),f=R(_,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),x(f).forEach(y),_.forEach(y),this.h()},h(){p(i,"position","absolute"),b(n,"class","hoverable svelte-gbjq08"),p(n,"position","absolute"),p(n,"top","0"),p(n,"left","0"),p(n,"right","0"),p(n,"height",xe+"px"),p(n,"cursor","ns-resize"),b(n,"role","button"),b(n,"tabindex","0"),b(a,"class","hoverable svelte-gbjq08"),p(a,"position","absolute"),p(a,"bottom","0"),p(a,"left","0"),p(a,"right","0"),p(a,"height",xe+"px"),p(a,"cursor","ns-resize"),b(a,"role","button"),b(a,"tabindex","0"),b(o,"class","hoverable svelte-gbjq08"),p(o,"position","absolute"),p(o,"top","0"),p(o,"bottom","0"),p(o,"left","0"),p(o,"width",xe+"px"),p(o,"cursor","ew-resize"),b(o,"role","button"),b(o,"tabindex","0"),b(f,"class","hoverable svelte-gbjq08"),p(f,"position","absolute"),p(f,"top","0"),p(f,"bottom","0"),p(f,"right","0"),p(f,"width",xe+"px"),p(f,"cursor","ew-resize"),b(f,"role","button"),b(f,"tabindex","0"),p(e,"position","relative"),p(e,"width",t[0]+"px"),p(e,"height",t[1]+"px"),p(e,"background",t[3]),p(e,"outline",(t[4]?"2":"1")+"px solid "+(t[4]?"red":"black"))},m(S,_){Y(S,e,_),O(e,i),I&&I.m(i,null),O(e,s),O(e,n),O(e,l),O(e,a),O(e,r),O(e,o),O(e,u),O(e,f),t[13](e),d=!0,v||(c=[G(n,"mousedown",t[9]),G(a,"mousedown",t[10]),G(o,"mousedown",t[11]),G(f,"mousedown",t[12])],v=!0)},p(S,[_]){I&&I.p&&(!d||_&128)&&He(I,m,S,S[7],d?Ye(m,S[7],_,null):Xe(S[7]),null),(!d||_&1)&&p(e,"width",S[0]+"px"),(!d||_&2)&&p(e,"height",S[1]+"px"),(!d||_&8)&&p(e,"background",S[3]),(!d||_&16)&&p(e,"outline",(S[4]?"2":"1")+"px solid "+(S[4]?"red":"black"))},i(S){d||(q(I,S),d=!0)},o(S){X(I,S),d=!1},d(S){S&&y(e),I&&I.d(S),t[13](null),v=!1,Me(c)}}}const xe=5;function Gt(t,e,i){let{$$slots:s={},$$scope:n}=e,{width:l=400}=e,{height:a=200}=e,{owningNode:r=""}=e,{backgroundColor:o="rgba(230,230,230,0.1)"}=e,{highlightOutline:u=!1}=e,f;const d=Ge(),v=_=>d("resizestart",{nodeId:r,direction:he.Top,event:_}),c=_=>d("resizestart",{nodeId:r,direction:he.Bottom,event:_}),m=_=>d("resizestart",{nodeId:r,direction:he.Left,event:_}),I=_=>d("resizestart",{nodeId:r,direction:he.Right,event:_});function S(_){ze[_?"unshift":"push"](()=>{f=_,i(5,f)})}return t.$$set=_=>{"width"in _&&i(0,l=_.width),"height"in _&&i(1,a=_.height),"owningNode"in _&&i(2,r=_.owningNode),"backgroundColor"in _&&i(3,o=_.backgroundColor),"highlightOutline"in _&&i(4,u=_.highlightOutline),"$$scope"in _&&i(7,n=_.$$scope)},[l,a,r,o,u,f,d,n,s,v,c,m,I,S]}class Kt extends we{constructor(e){super(),ke(this,e,Gt,Wt,be,{width:0,height:1,owningNode:2,backgroundColor:3,highlightOutline:4})}}const Jt=t=>t<ge?ge:t,bt=t=>({width:t.width,height:Jt(t.height)}),wt=(t,e,i,s,n)=>{if(e.length===0)return bt({width:i,height:s});const l=e.map(u=>{const f=t.filter(d=>d.id===u).pop();return f?{x:f.position.x+f.size.width,y:f.position.y+f.size.height}:{x:0,y:0}}),a=Math.max(...l.map(u=>u.x)),r=Math.max(...l.map(u=>u.y));return{width:a+20,height:r+40+n}};function tt(t,e,i){const s=t.slice();return s[40]=e[i],s}function Qt(t){let e,i,s,n;return{c(){e=F("button"),i=ft("+"),this.h()},l(l){e=R(l,"BUTTON",{class:!0,style:!0});var a=x(e);i=ct(a,"+"),a.forEach(y),this.h()},h(){b(e,"class","addBtn svelte-153ha10"),p(e,"width",t[14]+"px"),p(e,"height",J+"px")},m(l,a){Y(l,e,a),O(e,i),s||(n=G(e,"click",t[28]),s=!0)},p(l,a){a[0]&16384&&p(e,"width",l[14]+"px")},i:Ie,o:Ie,d(l){l&&y(e),s=!1,n()}}}function Zt(t){let e,i,s=Ne(t[10]||[]),n=[];for(let a=0;a<s.length;a+=1)n[a]=it(tt(t,s,a));const l=a=>X(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=me()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=me()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);Y(a,e,r),i=!0},p(a,r){if(r[0]&1535){s=Ne(a[10]||[]);let o;for(o=0;o<s.length;o+=1){const u=tt(a,s,o);n[o]?(n[o].p(u,r),q(n[o],1)):(n[o]=it(u),n[o].c(),q(n[o],1),n[o].m(e.parentNode,e))}for(De(),o=s.length;o<n.length;o+=1)l(o);Ue()}},i(a){if(!i){for(let r=0;r<s.length;r+=1)q(n[r]);i=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)X(n[r]);i=!1},d(a){a&&y(e),Ke(n,a)}}}function it(t){let e,i;return e=new kt({props:{nodes:t[0],nodeId:t[40].id,backgroundColor:t[1],handleMousedown:t[5],handleMouseup:t[6],linkEdgeStart:t[2],linkEdgeEnd:t[3],linkEdgeOverlap:t[4],resizeStart:t[7],addChild:t[8]}}),e.$on("nodedragstart",function(){_e(t[5])&&t[5].apply(this,arguments)}),{c(){se(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){le(e,s,n),i=!0},p(s,n){t=s;const l={};n[0]&1&&(l.nodes=t[0]),n[0]&1024&&(l.nodeId=t[40].id),n[0]&2&&(l.backgroundColor=t[1]),n[0]&32&&(l.handleMousedown=t[5]),n[0]&64&&(l.handleMouseup=t[6]),n[0]&4&&(l.linkEdgeStart=t[2]),n[0]&8&&(l.linkEdgeEnd=t[3]),n[0]&16&&(l.linkEdgeOverlap=t[4]),n[0]&128&&(l.resizeStart=t[7]),n[0]&256&&(l.addChild=t[8]),e.$set(l)},i(s){i||(q(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function $t(t){let e,i,s,n,l,a,r,o,u,f,d,v,c,m,I,S,_;i=new et({props:{edgelinkSize:J,node:t[9],data:t[9].startLinker,type:M.Start}}),i.$on("linkstart",function(){_e(t[2])&&t[2].apply(this,arguments)}),i.$on("linkend",function(){_e(t[3])&&t[3].apply(this,arguments)}),i.$on("linkoverlap",function(){_e(t[4])&&t[4].apply(this,arguments)});const N=[Zt,Qt],B=[];function D(g,k){return g[19]?0:1}return o=D(t),u=B[o]=N[o](t),m=new et({props:{edgelinkSize:J,node:t[9],data:t[9].endLinker,type:M.End}}),m.$on("linkstart",function(){_e(t[2])&&t[2].apply(this,arguments)}),m.$on("linkend",function(){_e(t[3])&&t[3].apply(this,arguments)}),m.$on("linkoverlap",function(){_e(t[4])&&t[4].apply(this,arguments)}),{c(){e=F("div"),se(i.$$.fragment),s=ee(),n=F("div"),l=F("input"),a=ee(),r=F("div"),u.c(),f=ee(),d=F("div"),v=F("div"),c=ee(),se(m.$$.fragment),this.h()},l(g){e=R(g,"DIV",{class:!0,style:!0});var k=x(e);oe(i.$$.fragment,k),k.forEach(y),s=te(g),n=R(g,"DIV",{class:!0});var V=x(n);l=R(V,"INPUT",{type:!0,class:!0,style:!0}),V.forEach(y),a=te(g),r=R(g,"DIV",{class:!0,style:!0});var H=x(r);u.l(H),H.forEach(y),f=te(g),d=R(g,"DIV",{class:!0,style:!0});var A=x(d);v=R(A,"DIV",{}),x(v).forEach(y),c=te(A),oe(m.$$.fragment,A),A.forEach(y),this.h()},h(){b(e,"class","d-flex justify-content-between iil-section condition svelte-153ha10"),p(e,"height",J+"px"),b(l,"type","text"),b(l,"class","p-0 m-0"),p(l,"width","100%"),p(l,"height",J+"px"),p(l,"border","0px solid black"),b(n,"class","iil-section svelte-153ha10"),b(r,"class","d-flex justify-content-between iil-section svelte-153ha10"),p(r,"width",t[14]+"px"),p(r,"height",t[15]-J*(t[21]-1)+"px"),b(d,"class","d-flex justify-content-between iil-section condition svelte-153ha10"),p(d,"height",J+"px")},m(g,k){Y(g,e,k),le(i,e,null),Y(g,s,k),Y(g,n,k),O(n,l),t[25](l),Qe(l,t[17]),Y(g,a,k),Y(g,r,k),B[o].m(r,null),Y(g,f,k),Y(g,d,k),O(d,v),O(d,c),le(m,d,null),I=!0,S||(_=[G(l,"input",t[26]),G(l,"click",t[27])],S=!0)},p(g,k){t=g;const V={};k[0]&512&&(V.node=t[9]),k[0]&512&&(V.data=t[9].startLinker),i.$set(V),k[0]&131072&&l.value!==t[17]&&Qe(l,t[17]);let H=o;o=D(t),o===H?B[o].p(t,k):(De(),X(B[H],1,1,()=>{B[H]=null}),Ue(),u=B[o],u?u.p(t,k):(u=B[o]=N[o](t),u.c()),q(u,1),u.m(r,null)),(!I||k[0]&16384)&&p(r,"width",t[14]+"px"),(!I||k[0]&32768)&&p(r,"height",t[15]-J*(t[21]-1)+"px");const A={};k[0]&512&&(A.node=t[9]),k[0]&512&&(A.data=t[9].endLinker),m.$set(A)},i(g){I||(q(i.$$.fragment,g),q(u),q(m.$$.fragment,g),I=!0)},o(g){X(i.$$.fragment,g),X(u),X(m.$$.fragment,g),I=!1},d(g){g&&(y(e),y(s),y(n),y(a),y(r),y(f),y(d)),re(i),t[25](null),B[o].d(),re(m),S=!1,Me(_)}}}function ei(t){let e,i;return e=new pt({props:{backgroundColor:"rgba(230,230,230,0.0)",owningNode:t[9].id,width:t[14],height:t[15],$$slots:{default:[$t]},$$scope:{ctx:t}}}),{c(){se(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){le(e,s,n),i=!0},p(s,n){const l={};n[0]&512&&(l.owningNode=s[9].id),n[0]&16384&&(l.width=s[14]),n[0]&32768&&(l.height=s[15]),n[0]&968703|n[1]&4096&&(l.$$scope={dirty:n,ctx:s}),e.$set(l)},i(s){i||(q(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function ti(t){let e,i,s,n,l,a;return i=new Kt({props:{owningNode:t[9].id,width:t[14],height:t[15],backgroundColor:t[1],highlightOutline:t[13],$$slots:{default:[ei]},$$scope:{ctx:t}}}),i.$on("resizestart",function(){_e(t[7])&&t[7].apply(this,arguments)}),{c(){e=F("div"),se(i.$$.fragment),this.h()},l(r){e=R(r,"DIV",{id:!0,role:!0,class:!0,style:!0,tabindex:!0});var o=x(e);oe(i.$$.fragment,o),o.forEach(y),this.h()},h(){b(e,"id",s=t[9].id),b(e,"role","button"),b(e,"class","iil-container unselectable svelte-153ha10"),p(e,"top",t[12]+"px"),p(e,"left",t[11]+"px"),b(e,"tabindex","0")},m(r,o){Y(r,e,o),le(i,e,null),t[29](e),n=!0,l||(a=[G(e,"click",t[30]),G(e,"keydown",ii),G(e,"mousedown",t[31]),G(e,"mouseenter",t[32]),G(e,"mouseleave",t[33]),G(e,"mousemove",t[34]),G(e,"contextmenu",t[35])],l=!0)},p(r,o){t=r;const u={};o[0]&512&&(u.owningNode=t[9].id),o[0]&16384&&(u.width=t[14]),o[0]&32768&&(u.height=t[15]),o[0]&2&&(u.backgroundColor=t[1]),o[0]&8192&&(u.highlightOutline=t[13]),o[0]&968703|o[1]&4096&&(u.$$scope={dirty:o,ctx:t}),i.$set(u),(!n||o[0]&512&&s!==(s=t[9].id))&&b(e,"id",s),(!n||o[0]&4096)&&p(e,"top",t[12]+"px"),(!n||o[0]&2048)&&p(e,"left",t[11]+"px")},i(r){n||(q(i.$$.fragment,r),n=!0)},o(r){X(i.$$.fragment,r),n=!1},d(r){r&&y(e),re(i),t[29](null),l=!1,Me(a)}}}const ii=t=>{};function ni(t,e,i){const s=Ge();let{nodes:n=[]}=e,{nodeId:l=""}=e,{backgroundColor:a="rgba(0,0,0,0.0)"}=e,{linkEdgeStart:r}=e,{linkEdgeEnd:o}=e,{linkEdgeOverlap:u}=e,{handleMousedown:f}=e,{handleMouseup:d}=e,{resizeStart:v}=e,{addChild:c}=e,m=mt(),I=m.position.x,S=m.position.y;m.parent;let _=!1,N=[],B=N.length>0?3:4,D=m.size.width,g=m.size.height<J*B?J*B:m.size.height,k=m.data,V,H=k.label,A,Q=!1;We(()=>{E()});const E=()=>{const C=N.length;i(10,N=n.filter(pe=>pe.parent===l)),C!==N.length&&U()},U=()=>{const C=wt(n,N.map(pe=>pe.id),D,g,J*B);C.width!==m.size.width&&C.height!==m.size.height&&ne.set(n.map(pe=>pe.id===l?{...m,size:C}:pe))},L=()=>{c(m),U()};function j(C){ze[C?"unshift":"push"](()=>{A=C,i(18,A)})}function Z(){H=this.value,i(17,H),i(0,n),i(23,l),i(9,m),i(10,N),i(24,k)}const W=C=>A.focus(),ie=C=>L();function ve(C){ze[C?"unshift":"push"](()=>{V=C,i(16,V)})}const ue=C=>s("nodeclick",{node:m,event:C}),qe=C=>s("nodedragstart",{node:m,event:C}),Ve=C=>s("nodemouseenter",{node:m,event:C}),Le=C=>s("nodemouseleave",{node:m,event:C}),je=C=>s("nodemousemove",{node:m,event:C}),Fe=C=>s("nodecontextmenu",{node:m,event:C});return t.$$set=C=>{"nodes"in C&&i(0,n=C.nodes),"nodeId"in C&&i(23,l=C.nodeId),"backgroundColor"in C&&i(1,a=C.backgroundColor),"linkEdgeStart"in C&&i(2,r=C.linkEdgeStart),"linkEdgeEnd"in C&&i(3,o=C.linkEdgeEnd),"linkEdgeOverlap"in C&&i(4,u=C.linkEdgeOverlap),"handleMousedown"in C&&i(5,f=C.handleMousedown),"handleMouseup"in C&&i(6,d=C.handleMouseup),"resizeStart"in C&&i(7,v=C.resizeStart),"addChild"in C&&i(8,c=C.addChild)},t.$$.update=()=>{t.$$.dirty[0]&25167361&&(i(9,m=n.filter(C=>C.id===l).pop()),m&&(i(10,N=n.filter(C=>C.parent===l)),i(19,Q=N.length>0),i(24,k=m.data),m.parent,i(11,I=m.position.x),i(12,S=m.position.y),i(14,D=m.size.width),i(15,g=m.size.height),i(24,k=m.data),i(17,H=k.label),i(13,_=m.selected)))},[n,a,r,o,u,f,d,v,c,m,N,I,S,_,D,g,V,H,A,Q,s,B,L,l,k,j,Z,W,ie,ve,ue,qe,Ve,Le,je,Fe]}class kt extends we{constructor(e){super(),ke(this,e,ni,ti,be,{nodes:0,nodeId:23,backgroundColor:1,linkEdgeStart:2,linkEdgeEnd:3,linkEdgeOverlap:4,handleMousedown:5,handleMouseup:6,resizeStart:7,addChild:8},null,[-1,-1])}}function nt(t,e,i){const s=t.slice();return s[51]=e[i],s}function st(t,e,i){const s=t.slice();return s[54]=e[i],s}function ot(t){let e,i;return e=new _t({props:{edge:t[54]}}),{c(){se(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){le(e,s,n),i=!0},p(s,n){const l={};n[0]&16&&(l.edge=s[54]),e.$set(l)},i(s){i||(q(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function lt(t){let e,i;return e=new _t({props:{edge:t[5]}}),{c(){se(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){le(e,s,n),i=!0},p(s,n){const l={};n[0]&32&&(l.edge=s[5]),e.$set(l)},i(s){i||(q(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function si(t){let e,i,s,n=Ne(t[4]),l=[];for(let o=0;o<n.length;o+=1)l[o]=ot(st(t,n,o));const a=o=>X(l[o],1,1,()=>{l[o]=null});let r=t[5]&&lt(t);return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ee(),r&&r.c(),i=me()},l(o){for(let u=0;u<l.length;u+=1)l[u].l(o);e=te(o),r&&r.l(o),i=me()},m(o,u){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(o,u);Y(o,e,u),r&&r.m(o,u),Y(o,i,u),s=!0},p(o,u){if(u[0]&16){n=Ne(o[4]);let f;for(f=0;f<n.length;f+=1){const d=st(o,n,f);l[f]?(l[f].p(d,u),q(l[f],1)):(l[f]=ot(d),l[f].c(),q(l[f],1),l[f].m(e.parentNode,e))}for(De(),f=n.length;f<l.length;f+=1)a(f);Ue()}o[5]?r?(r.p(o,u),u[0]&32&&q(r,1)):(r=lt(o),r.c(),q(r,1),r.m(i.parentNode,i)):r&&(De(),X(r,1,1,()=>{r=null}),Ue())},i(o){if(!s){for(let u=0;u<n.length;u+=1)q(l[u]);q(r),s=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)X(l[u]);X(r),s=!1},d(o){o&&(y(e),y(i)),Ke(l,o),r&&r.d(o)}}}function rt(t){let e,i;return e=new kt({props:{nodes:t[3],nodeId:t[51].id,backgroundColor:ai,handleMousedown:t[6],handleMouseup:t[7],linkEdgeStart:t[8],linkEdgeEnd:t[9],linkEdgeOverlap:t[10],resizeStart:t[11],addChild:t[12]}}),e.$on("nodedragstart",t[6]),{c(){se(e.$$.fragment)},l(s){oe(e.$$.fragment,s)},m(s,n){le(e,s,n),i=!0},p(s,n){const l={};n[0]&8&&(l.nodes=s[3]),n[0]&8&&(l.nodeId=s[51].id),e.$set(l)},i(s){i||(q(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){re(e,s)}}}function at(t){let e,i,s=t[51].parent===void 0&&rt(t);return{c(){s&&s.c(),e=me()},l(n){s&&s.l(n),e=me()},m(n,l){s&&s.m(n,l),Y(n,e,l),i=!0},p(n,l){n[51].parent===void 0?s?(s.p(n,l),l[0]&8&&q(s,1)):(s=rt(n),s.c(),q(s,1),s.m(e.parentNode,e)):s&&(De(),X(s,1,1,()=>{s=null}),Ue())},i(n){i||(q(s),i=!0)},o(n){X(s),i=!1},d(n){n&&y(e),s&&s.d(n)}}}function oi(t){let e,i,s=Ne(t[3]),n=[];for(let a=0;a<s.length;a+=1)n[a]=at(nt(t,s,a));const l=a=>X(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=me()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=me()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);Y(a,e,r),i=!0},p(a,r){if(r[0]&8136){s=Ne(a[3]);let o;for(o=0;o<s.length;o+=1){const u=nt(a,s,o);n[o]?(n[o].p(u,r),q(n[o],1)):(n[o]=at(u),n[o].c(),q(n[o],1),n[o].m(e.parentNode,e))}for(De(),o=s.length;o<n.length;o+=1)l(o);Ue()}},i(a){if(!i){for(let r=0;r<s.length;r+=1)q(n[r]);i=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)X(n[r]);i=!1},d(a){a&&y(e),Ke(n,a)}}}function li(t){let e,i,s,n,l,a;return s=new At({props:{width:t[0],height:t[1],hasBackground:!0,$$slots:{default:[si]},$$scope:{ctx:t}}}),l=new pt({props:{backgroundColor:ri,owningNode:"root",width:t[0],height:t[1],$$slots:{default:[oi]},$$scope:{ctx:t}}}),{c(){e=F("div"),i=F("div"),se(s.$$.fragment),n=ee(),se(l.$$.fragment),this.h()},l(r){e=R(r,"DIV",{});var o=x(e);i=R(o,"DIV",{style:!0});var u=x(i);oe(s.$$.fragment,u),n=te(u),oe(l.$$.fragment,u),u.forEach(y),o.forEach(y),this.h()},h(){p(i,"position","relative"),p(i,"width",t[0]+"px"),p(i,"height",t[1]+"px")},m(r,o){Y(r,e,o),O(e,i),le(s,i,null),O(i,n),le(l,i,null),t[14](i),a=!0},p(r,o){const u={};o[0]&1&&(u.width=r[0]),o[0]&2&&(u.height=r[1]),o[0]&48|o[1]&67108864&&(u.$$scope={dirty:o,ctx:r}),s.$set(u);const f={};o[0]&1&&(f.width=r[0]),o[0]&2&&(f.height=r[1]),o[0]&8|o[1]&67108864&&(f.$$scope={dirty:o,ctx:r}),l.$set(f),(!a||o[0]&1)&&p(i,"width",r[0]+"px"),(!a||o[0]&2)&&p(i,"height",r[1]+"px")},i(r){a||(q(s.$$.fragment,r),q(l.$$.fragment,r),a=!0)},o(r){X(s.$$.fragment,r),X(l.$$.fragment,r),a=!1},d(r){r&&y(e),re(s),re(l),t[14](null)}}}let ri="rgba(230,230,230,0.0)",ai="rgb(230,230,230)";function di(t,e,i){let{width:s=0}=e,{height:n=0}=e,l,a=null,r,o,u=mt(),f=[],d=null,v=null,c=0,m=0,I=0,S=0,_=0,N=0,B={x:0,y:0},D={width:0,height:0},g={width:0,height:0},k=!1,V=!1,H=!1,A=he.None,Q=null;const E=ne.subscribe(h=>{if(i(3,r=h),o&&o.length){const w=$e(o,r);ye.set(w)}}),U=ye.subscribe(h=>{i(4,o=h)});ut(()=>{E(),U()}),We(()=>{if(o&&r){const h=$e(o,r);ye.set(h)}});const L=h=>{if(h.detail.event.stopPropagation(),Ht(h.detail.event)||V||H)return;a=l.getBoundingClientRect(),k=!0,pe(h.detail.node);let w=h.detail.node,z=Se(h.detail.event,a);c=z.x-w.position.x,m=z.y-w.position.y,document.onmousemove=j,document.onmouseleave=Le,document.onmouseup=Z},j=h=>{h.stopPropagation(),a=l.getBoundingClientRect();let w=Se(h,a);V&&d?C(w):k&&(Fe(w,!0),ve(h))},Z=()=>{var h,w;if(k=!1,V=!1,document.onmousemove=null,document.onmouseleave=null,document.onmouseenter=null,f.length&&(ne.set(r.map(z=>f.includes(z.id)?{...z,selected:!1}:z)),v)){const z=((h=v.getAttribute("id"))==null?void 0:h.replace(Be,""))==="root"||(w=v.getAttribute("id"))==null?void 0:w.replace(Be,""),T=r.filter(K=>f.includes(K.id)).map(K=>K.parent).pop();if(z!==T){const K=T?r.filter(P=>T===P.id).pop():void 0,fe=z?r.filter(P=>z===P.id).pop():void 0,$=ie(K),ce=ie(fe);ne.set(r.map(P=>{var Te;if(T&&T.includes(P.id)){const Ae=(Te=P.children)==null?void 0:Te.filter(Nt=>!f.includes(Nt));return{...P,children:Ae,size:Ae!=null&&Ae.length?P.size:{width:P.size.width,height:ge}}}return z&&z===P.id?{...P,children:P.children?[...P.children,...f]:f}:f.includes(P.id)?{...P,position:z?W(P.position.x+($==null?void 0:$.x)-(ce==null?void 0:ce.x),P.position.y+($==null?void 0:$.y)-(ce==null?void 0:ce.y)):{x:P.position.x+($==null?void 0:$.x),y:P.position.y+($==null?void 0:$.y)},parent:z==="root"?void 0:z}:P}))}else ne.set(r.map(K=>f.includes(K.id)?{...K,position:W(K.position.x,K.position.y)}:K));v.style.setProperty("box-shadow","0px 0px 0px 0px #09A9A9"),v=null}f=[],g={width:0,height:0},d&&i(5,d=null)},W=(h,w)=>({x:h<0?0:h,y:w<J*2?J*2:w}),ie=h=>{if(!h)return{x:0,y:0};let w=h.parent,z={x:h.position.x,y:h.position.y};for(;w;){let T=r.filter(K=>K.id===w).pop();if(T)z.x+=T.position.x,z.y+=T.position.y,w=T.parent;else break}return z},ve=h=>{h.stopPropagation(),a=l.getBoundingClientRect(),Se(h,a);const w=Ve(h.clientX,h.clientY,f[0]);w&&(v!==w&&(v==null||v.style.setProperty("box-shadow","0px 0px 0px 0px #09A9A9")),w==null||w.style.setProperty("box-shadow","0px 0px 0px 4px #09A9A9"),v=w)},ue=(h,w)=>w.getAttribute("id")!==Be+h,qe=(h,w)=>{const z=h.getBoundingClientRect(),T=w.getBoundingClientRect();return!(z.top>T.bottom||z.right<T.left||z.bottom<T.top||z.left>T.right)},Ve=(h,w,z)=>{const T=document.elementsFromPoint(h,w),K=document.getElementById(Be+z);return Array.from(T).filter(fe=>fe.classList.contains("nodecanvas")&&ue(z,fe)&&qe(fe,K)).shift()},Le=h=>{h.stopPropagation(),document.onmousemove=null,document.onmouseenter=je},je=h=>{h.stopPropagation(),(h.type==="mousedown"||h.type==="touchstart")&&f.length&&(document.onmousemove=j)},Fe=(h,w)=>{if(f.length){let z=r.filter(T=>f.includes(T.id)).pop();ne.set(r.map(T=>z.id===T.id?{...T,selected:w||!1,position:{x:h.x-c,y:h.y-m}}:T))}},C=h=>{d&&(d.from?i(5,d.to={x:h.x,y:h.y},d):i(5,d.from={x:h.x,y:h.y},d))},pe=h=>{f=[h.id]},vt=h=>{V=!0,h.detail.event.stopPropagation(),a=l.getBoundingClientRect(),h.detail.type===M.Start?i(5,d={id:"new",fromId:h.detail.node.id,fromType:M.Start,from:{...Ce(h.detail.node,M.Start)},data:{label:"edge 1"}}):i(5,d={id:"new",toId:h.detail.node.id,toType:M.End,to:{...Ce(h.detail.node,M.End)},data:{label:"edge 1"}});let w=Se(h.detail.event,a);c=w.x-h.detail.node.position.x,m=w.y-h.detail.node.position.y,document.onmousemove=j,document.onmouseleave=Le,document.onmouseup=Z},yt=h=>{V=!1,h.detail.event.stopPropagation(),document.onmousemove=null,document.onmouseleave=null,document.onmouseenter=null,i(5,d=null),Q&&(ye.set([...o,Q]),ne.set(r),Q=null)},It=h=>{h.detail.event.stopPropagation(),V&&d&&d.fromId!==h.detail.node.id&&(d.fromId&&h.detail.type===M.End?Q={...d,id:d.fromId+"-"+h.detail.node.id,toId:h.detail.node.id,toType:M.End,to:{...Ce(h.detail.node,h.detail.type)}}:d.toId&&h.detail.type===M.Start&&(Q={...d,id:d.fromId+"-"+h.detail.node.id,fromId:h.detail.node.id,fromType:M.Start,from:{...Ce(h.detail.node,h.detail.type)}}))},Et=h=>{if(h.parent){const w=r.filter(z=>z.id===h.parent).pop();if(w)return w.size}return{width:s,height:n}},St=h=>{H=!0,h.detail.event.stopPropagation(),A=h.detail.direction,f=[h.detail.nodeId];let w=r.filter(T=>f.includes(T.id)).pop();B=w.position,D=w.size,a=l.getBoundingClientRect(),g=Et(w);let z=Se(h.detail.event,a);c=z.x-w.position.x-w.size.width,m=z.y-w.position.y-w.size.height,S=z.y-w.position.y,_=z.y,N=z.x,I=z.x,document.onmousemove=Ct,document.onmouseup=zt},Ct=h=>{h.stopPropagation(),a=l.getBoundingClientRect();let w=Se(h,a);const z=w.x-I,T=w.y-S,K=D.width+(N-w.x),fe=D.height+(_-w.y),$=D.height-_+w.y,ce=D.width-N+w.x;if(H){let P=r.filter(Te=>f.includes(Te.id)).pop();switch(A){case he.Top:Oe(P,{width:P.size.width,height:fe<ge?ge:T<0?B.y+D.height:fe},{x:P.position.x,y:T<0?0:fe<ge?B.y+D.height-ge:T});break;case he.Bottom:Oe(P,{width:P.size.width,height:D.height-_+w.y<ge?ge:$+B.y>g.height?g.height-B.y:$});break;case he.Left:Oe(P,{width:K<Ee?Ee:B.x+z<0?B.x+D.width:K,height:P.size.height},{x:B.x+z<0?0:K<Ee?B.x+D.width-Ee:B.x+z,y:P.position.y});break;case he.Right:Oe(P,{width:D.width-N+w.x<Ee?Ee:ce+B.x>g.width?g.width-B.x:ce,height:P.size.height});break}}},Oe=(h,w,z)=>{f.length&&ne.set(r.map(T=>h.id===T.id?{...h,position:z||h.position,size:w}:T))},zt=()=>{H=!1,document.onmousemove=null,document.onmouseleave=null,document.onmouseenter=null},Je=h=>{const w={...u,id:"node"+(r.length+1),data:{label:"node "+(r.length+1)},parent:h==null?void 0:h.id,depth:h!=null&&h.depth?h.depth+1:0};return ne.set([...r,w]),w},Dt=h=>{const w=Je(h);return h.children&&h.children.length>0?h.children.push(w.id):h.children=[w.id],w};function Ut(h){ze[h?"unshift":"push"](()=>{l=h,i(2,l)})}return t.$$set=h=>{"width"in h&&i(0,s=h.width),"height"in h&&i(1,n=h.height)},[s,n,l,r,o,d,L,Z,vt,yt,It,St,Dt,Je,Ut]}class hi extends we{constructor(e){super(),ke(this,e,di,li,be,{width:0,height:1,addNode:13},null,[-1,-1])}get addNode(){return this.$$.ctx[13]}}const dt=[{id:"edge1",fromId:"node1",fromType:M.End,toType:M.Start,toId:"node2",data:{label:"edge 1"}},{id:"edge2",fromId:"node2",fromType:M.End,toType:M.Start,toId:"node3",data:{label:"edge 2"}}],ht=[{id:"node1",position:{x:100,y:100},size:{width:160,height:80},data:{label:"node 1"},children:[],startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node2",position:{x:300,y:100},size:{width:160,height:80},data:{label:"node 2"},startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node3",position:{x:500,y:100},size:{width:160,height:60},data:{label:"node 3"},startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0}],ui=[{id:"edge1",fromId:"node1",fromType:M.End,toType:M.Start,toId:"node2",data:{label:"edge 1"}}],fi=[{id:"node1",position:{x:100,y:100},size:{width:160,height:200},data:{label:"node 1"},children:["node4","node3"],startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node2",position:{x:400,y:100},size:{width:160,height:80},data:{label:"node 2"},startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node3",position:{x:400,y:200},size:{width:160,height:60},data:{label:"node 3"},parent:"node1",startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node4",position:{x:100,y:100},size:{width:160,height:60},data:{label:"node 4"},parent:"node1",startLinker:{type:M.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:M.End,connected:!1,highlighted:!1,selected:!1},depth:1}];function ci(t){let e,i,s,n,l,a=`<span class="welcome"></span>

		TreeFlow Svelte Demo`,r,o,u,f,d,v,c="data 1",m,I,S="data 2",_,N,B,D="add new node",g,k,V,H={width:800,height:600};return u=new hi({props:H}),t[2](u),{c(){e=F("meta"),i=F("link"),s=ee(),n=F("section"),l=F("h1"),l.innerHTML=a,r=ee(),o=F("div"),se(u.$$.fragment),f=ee(),d=F("div"),v=F("button"),v.textContent=c,m=ee(),I=F("button"),I.textContent=S,_=ee(),N=F("div"),B=F("button"),B.textContent=D,this.h()},l(A){const Q=Mt("svelte-eiu3ux",document.head);e=R(Q,"META",{name:!0,content:!0}),i=R(Q,"LINK",{rel:!0,href:!0}),Q.forEach(y),s=te(A),n=R(A,"SECTION",{class:!0});var E=x(n);l=R(E,"H1",{class:!0,"data-svelte-h":!0}),Pe(l)!=="svelte-db5659"&&(l.innerHTML=a),r=te(E),o=R(E,"DIV",{class:!0});var U=x(o);oe(u.$$.fragment,U),f=te(U),d=R(U,"DIV",{});var L=x(d);v=R(L,"BUTTON",{"data-svelte-h":!0}),Pe(v)!=="svelte-1wqcxo0"&&(v.textContent=c),m=te(L),I=R(L,"BUTTON",{"data-svelte-h":!0}),Pe(I)!=="svelte-13wf4vi"&&(I.textContent=S),L.forEach(y),_=te(U),N=R(U,"DIV",{});var j=x(N);B=R(j,"BUTTON",{"data-svelte-h":!0}),Pe(B)!=="svelte-g48zgs"&&(B.textContent=D),j.forEach(y),U.forEach(y),E.forEach(y),this.h()},h(){document.title="TreeFlow",b(e,"name","description"),b(e,"content","Svelte demo app"),b(i,"rel","stylesheet"),b(i,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),b(l,"class","svelte-39krom"),b(o,"class","container"),b(n,"class","svelte-39krom")},m(A,Q){O(document.head,e),O(document.head,i),Y(A,s,Q),Y(A,n,Q),O(n,l),O(n,r),O(n,o),le(u,o,null),O(o,f),O(o,d),O(d,v),O(d,m),O(d,I),O(o,_),O(o,N),O(N,B),g=!0,k||(V=[G(v,"click",t[3]),G(I,"click",t[4]),G(B,"click",t[5])],k=!0)},p(A,[Q]){const E={};u.$set(E)},i(A){g||(q(u.$$.fragment,A),g=!0)},o(A){X(u.$$.fragment,A),g=!1},d(A){A&&(y(s),y(n)),y(e),y(i),t[2](null),re(u),k=!1,Me(V)}}}function gi(t,e,i){let s;const n=f=>{f==="1"?(ne.set(l(ht)),ye.set(dt)):f==="2"&&(ne.set(l(fi)),ye.set(ui))},l=f=>f.map(d=>{if(d.children&&d.children.length>0){const v=f.filter(m=>d.children.includes(m.id)),c=wt(f,v.map(m=>m.id),d.size.width,d.size.height,J*3);return d.size=c,{...d,size:c}}else return{...d,size:bt(d.size)}});ne.set(l(ht)),ye.set(dt);function a(f){ze[f?"unshift":"push"](()=>{s=f,i(0,s)})}return[s,n,a,f=>n("1"),f=>n("2"),f=>s.addNode()]}class ki extends we{constructor(e){super(),ke(this,e,gi,ci,be,{})}}export{ki as component,bi as universal};
