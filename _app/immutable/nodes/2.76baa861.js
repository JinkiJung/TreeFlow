import{s as H,v as J,f as k,g as I,h as y,d as p,k as h,i as D,x as Q,y as R,z as Z,B as S,C as M,j as c,w as b,u as j,o as de,p as me,a as X,r as G,c as O,D as A,E as _e,F as $e,e as q,G as ce,H as ve}from"../chunks/scheduler.7fca8958.js";import{S as N,i as T,a as E,t as z,b as L,d as P,m as V,e as B,g as ue,c as fe}from"../chunks/index.aa36007e.js";import{w as he}from"../chunks/index.04612deb.js";function W(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}const be=!0,Ke=Object.freeze(Object.defineProperty({__proto__:null,prerender:be},Symbol.toStringTag,{value:"Module"}));function we(r){let e,l;const n=r[3].default,t=J(n,r,r[2],null);return{c(){e=k("div"),t&&t.c(),this.h()},l(s){e=I(s,"DIV",{style:!0});var o=y(e);t&&t.l(o),o.forEach(p),this.h()},h(){h(e,"position","relative"),h(e,"width",r[0]+"px"),h(e,"height",r[1]+"px")},m(s,o){D(s,e,o),t&&t.m(e,null),l=!0},p(s,[o]){t&&t.p&&(!l||o&4)&&Q(t,n,s,s[2],l?Z(n,s[2],o,null):R(s[2]),null),(!l||o&1)&&h(e,"width",s[0]+"px"),(!l||o&2)&&h(e,"height",s[1]+"px")},i(s){l||(E(t,s),l=!0)},o(s){z(t,s),l=!1},d(s){s&&p(e),t&&t.d(s)}}}function xe(r,e,l){let{$$slots:n={},$$scope:t}=e,{width:s=0}=e,{height:o=0}=e;return r.$$set=a=>{"width"in a&&l(0,s=a.width),"height"in a&&l(1,o=a.height),"$$scope"in a&&l(2,t=a.$$scope)},[s,o,t,n]}class ye extends N{constructor(e){super(),T(this,e,xe,we,H,{width:0,height:1})}}function Ee(r){let e,l,n,t,s,o,a,i,f,g;const v=r[1].default,m=J(v,r,r[0],null);return{c(){e=S("svg"),l=S("defs"),n=S("pattern"),t=S("circle"),s=S("filter"),o=S("feDropShadow"),a=S("g"),i=S("rect"),f=S("g"),m&&m.c(),this.h()},l(u){e=M(u,"svg",{style:!0,xmlns:!0});var d=y(e);l=M(d,"defs",{});var _=y(l);n=M(_,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var x=y(n);t=M(x,"circle",{fill:!0,cx:!0,cy:!0,r:!0}),y(t).forEach(p),x.forEach(p),s=M(_,"filter",{id:!0,x:!0,y:!0,width:!0,height:!0});var w=y(s);o=M(w,"feDropShadow",{dx:!0,dy:!0,stdDeviation:!0,"flood-color":!0,"flood-opacity":!0}),y(o).forEach(p),w.forEach(p),_.forEach(p),a=M(d,"g",{id:!0,filter:!0});var $=y(a);i=M($,"rect",{id:!0,width:!0,height:!0,fill:!0}),y(i).forEach(p),f=M($,"g",{id:!0});var F=y(f);m&&m.l(F),F.forEach(p),$.forEach(p),d.forEach(p),this.h()},h(){c(t,"fill","#AAAAAA"),c(t,"cx","0"),c(t,"cy","0"),c(t,"r","1"),c(n,"id","dots"),c(n,"x","0"),c(n,"y","0"),c(n,"width","20"),c(n,"height","20"),c(n,"patternUnits","userSpaceOnUse"),c(o,"dx","0"),c(o,"dy","0"),c(o,"stdDeviation","0.5"),c(o,"flood-color","#000000"),c(o,"flood-opacity","0.5"),c(s,"id","shadow"),c(s,"x","-50%"),c(s,"y","-50%"),c(s,"width","200%"),c(s,"height","200%"),c(i,"id","canvas-bg"),c(i,"width","100%"),c(i,"height","100%"),c(i,"fill","url(#dots)"),c(f,"id","canvas-content"),c(a,"id","canvas"),c(a,"filter","url(#shadow)"),h(e,"position","absolute"),h(e,"top","0"),h(e,"left","0"),h(e,"width","100%"),h(e,"height","100%"),c(e,"xmlns","http://www.w3.org/2000/svg")},m(u,d){D(u,e,d),b(e,l),b(l,n),b(n,t),b(l,s),b(s,o),b(e,a),b(a,i),b(a,f),m&&m.m(f,null),g=!0},p(u,[d]){m&&m.p&&(!g||d&1)&&Q(m,v,u,u[0],g?Z(v,u[0],d,null):R(u[0]),null)},i(u){g||(E(m,u),g=!0)},o(u){z(m,u),g=!1},d(u){u&&p(e),m&&m.d(u)}}}function ze(r,e,l){let{$$slots:n={},$$scope:t}=e;return r.$$set=s=>{"$$scope"in s&&l(0,t=s.$$scope)},[t,n]}class ke extends N{constructor(e){super(),T(this,e,ze,Ee,H,{})}}function Ie(r){let e,l;const n=r[1].default,t=J(n,r,r[0],null);return{c(){e=k("div"),t&&t.c(),this.h()},l(s){e=I(s,"DIV",{style:!0});var o=y(e);t&&t.l(o),o.forEach(p),this.h()},h(){h(e,"position","absolute"),h(e,"top","0"),h(e,"left","0"),h(e,"width","100%"),h(e,"height","100%"),h(e,"z-index","2")},m(s,o){D(s,e,o),t&&t.m(e,null),l=!0},p(s,[o]){t&&t.p&&(!l||o&1)&&Q(t,n,s,s[0],l?Z(n,s[0],o,null):R(s[0]),null)},i(s){l||(E(t,s),l=!0)},o(s){z(t,s),l=!1},d(s){s&&p(e),t&&t.d(s)}}}function De(r,e,l){let{$$slots:n={},$$scope:t}=e;return r.$$set=s=>{"$$scope"in s&&l(0,t=s.$$scope)},[t,n]}class Se extends N{constructor(e){super(),T(this,e,De,Ie,H,{})}}function Me(r){let e;return{c(){e=S("path"),this.h()},l(l){e=M(l,"path",{stroke:!0,fill:!0}),y(e).forEach(p),this.h()},h(){c(e,"stroke","gray"),c(e,"fill","transparent")},m(l,n){D(l,e,n),r[6](e)},p:j,i:j,o:j,d(l){l&&p(e),r[6](null)}}}function Ae(r,e,l){var v,m,u,d;let{edge:n}=e,t=(v=n.from)==null?void 0:v.x,s=(m=n.from)==null?void 0:m.y,o=(u=n.to)==null?void 0:u.x,a=(d=n.to)==null?void 0:d.y,i;de(()=>{n.from&&n.to&&i.setAttribute("d",f(o,a,t,s))});const f=(_,x,w,$)=>{let ee=Math.abs(_-w)*.675,pe=w-ee,ge=_+ee;return`M${w} ${$} C ${pe} ${$} ${ge} ${x} ${_} ${x}`};function g(_){me[_?"unshift":"push"](()=>{i=_,l(0,i)})}return r.$$set=_=>{"edge"in _&&l(1,n=_.edge)},r.$$.update=()=>{var _,x,w,$;r.$$.dirty&63&&(l(2,t=(_=n.from)==null?void 0:_.x),l(3,s=(x=n.from)==null?void 0:x.y),l(4,o=(w=n.to)==null?void 0:w.x),l(5,a=($=n.to)==null?void 0:$.y),i&&n.from&&n.to&&i.setAttribute("d",f(t,s,o,a)))},[i,n,t,s,o,a,g]}class Ce extends N{constructor(e){super(),T(this,e,Ae,Me,H,{edge:1})}}const K=he([]),Y=he([]),C=20;function He(r){let e,l,n=`<div class="p-0" style="width: ${C}px; height: ${C}px; border: 1px solid black; box-sizing: border-box;">Start</div> <div></div>`,t,s,o,a,i,f,g=`<div></div> <div style="width: ${C}px; height: ${C}px; border: 1px solid black; box-sizing: border-box;">End</div>`,v,m;return{c(){e=k("div"),l=k("div"),l.innerHTML=n,t=X(),s=k("div"),o=k("input"),i=X(),f=k("div"),f.innerHTML=g,this.h()},l(u){e=I(u,"DIV",{id:!0,role:!0,style:!0,tabindex:!0});var d=y(e);l=I(d,"DIV",{class:!0,"data-svelte-h":!0}),G(l)!=="svelte-e57n0m"&&(l.innerHTML=n),t=O(d),s=I(d,"DIV",{});var _=y(s);o=I(_,"INPUT",{type:!0,class:!0,style:!0}),_.forEach(p),i=O(d),f=I(d,"DIV",{class:!0,"data-svelte-h":!0}),G(f)!=="svelte-1pm6c7p"&&(f.innerHTML=g),d.forEach(p),this.h()},h(){c(l,"class","d-flex justify-content-between"),c(o,"type","text"),c(o,"class","p-0"),h(o,"width","100%"),h(o,"height","20px"),h(o,"border","0px solid black"),h(o,"box-sizing","border-box"),o.value=a=r[5].label?r[5].label:"",c(f,"class","d-flex justify-content-between"),c(e,"id",r[7]),c(e,"role","button"),h(e,"position","absolute"),h(e,"top",r[1]+"px"),h(e,"left",r[2]+"px"),h(e,"width",r[3]+"px"),h(e,"height",r[4]+"px"),h(e,"background","rgba(0,0,0,0.5)"),h(e,"z-index","2"),h(e,"border","1px solid black"),h(e,"box-sizing","border-box"),c(e,"tabindex","0")},m(u,d){D(u,e,d),b(e,l),b(e,t),b(e,s),b(s,o),b(e,i),b(e,f),v||(m=[A(e,"click",r[8]),A(e,"keydown",Ne),A(e,"mousedown",r[9]),A(e,"mouseup",r[10]),A(e,"mouseenter",r[11]),A(e,"mouseleave",r[12]),A(e,"mousemove",r[13]),A(e,"contextmenu",r[14])],v=!0)},p(u,[d]){d&32&&a!==(a=u[5].label?u[5].label:"")&&o.value!==a&&(o.value=a),d&2&&h(e,"top",u[1]+"px"),d&4&&h(e,"left",u[2]+"px"),d&8&&h(e,"width",u[3]+"px"),d&16&&h(e,"height",u[4]+"px")},i:j,o:j,d(u){u&&p(e),v=!1,_e(m)}}}const Ne=r=>{};function Te(r,e,l){const n=$e();let{node:t}=e,s=t.id,o=t.position.x,a=t.position.y,i=t.size.width,f=t.size.height,g=t.data;t.selected;const v=$=>n("nodeclick",{node:t,event:$}),m=$=>n("nodedragstart",{node:t,event:$}),u=$=>n("nodedragstop",{node:t,nodes:[t],event:$}),d=$=>n("nodemouseenter",{node:t,event:$}),_=$=>n("nodemouseleave",{node:t,event:$}),x=$=>n("nodemousemove",{node:t,event:$}),w=$=>n("nodecontextmenu",{node:t,event:$});return r.$$set=$=>{"node"in $&&l(0,t=$.node)},r.$$.update=()=>{r.$$.dirty&3&&(l(2,o=t.position.x),l(1,a=t.position.y),l(3,i=t.size.width),l(4,f=t.size.height),l(5,g=t.data),t.selected,console.log(a))},[t,a,o,i,f,g,n,s,v,m,u,d,_,x,w]}class je extends N{constructor(e){super(),T(this,e,Te,He,H,{node:0})}}var U=(r=>(r.Start="start",r.End="end",r))(U||{});const Le=r=>"clientX"in r,te=(r,e)=>{var s,o;const l=Le(r),n=l?r.clientX:(s=r.touches)==null?void 0:s[0].clientX,t=l?r.clientY:(o=r.touches)==null?void 0:o[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:t-((e==null?void 0:e.top)??0)}},ne=(r,e)=>e===U.Start?{x:r.position.x+C/2,y:r.position.y+C/2}:e===U.End?{x:r.position.x+r.size.width-C/2,y:r.position.y+r.size.height-C/2}:{x:0,y:0},se=(r,e)=>{for(const l of r){if(l.fromId){const n=e.find(t=>t.id===l.fromId);if(n){const t=ne(n,U.End);l.from=t}}if(l.toId){const n=e.find(t=>t.id===l.toId);if(n){const t=ne(n,U.Start);l.to=t}}}return r},oe=r=>(r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault(),!1);function le(r,e,l){const n=r.slice();return n[11]=e[l],n}function re(r,e,l){const n=r.slice();return n[14]=e[l],n}function ie(r){let e,l;return e=new Ce({props:{edge:r[14]}}),{c(){L(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,t){V(e,n,t),l=!0},p(n,t){const s={};t&2&&(s.edge=n[14]),e.$set(s)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){z(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function Pe(r){let e,l,n=W(r[1]),t=[];for(let o=0;o<n.length;o+=1)t[o]=ie(re(r,n,o));const s=o=>z(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=q()},l(o){for(let a=0;a<t.length;a+=1)t[a].l(o);e=q()},m(o,a){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(o,a);D(o,e,a),l=!0},p(o,a){if(a&2){n=W(o[1]);let i;for(i=0;i<n.length;i+=1){const f=re(o,n,i);t[i]?(t[i].p(f,a),E(t[i],1)):(t[i]=ie(f),t[i].c(),E(t[i],1),t[i].m(e.parentNode,e))}for(ue(),i=n.length;i<t.length;i+=1)s(i);fe()}},i(o){if(!l){for(let a=0;a<n.length;a+=1)E(t[a]);l=!0}},o(o){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)z(t[a]);l=!1},d(o){o&&p(e),ce(t,o)}}}function ae(r){let e,l;return e=new je({props:{node:r[11]}}),e.$on("nodeclick",r[4]),e.$on("nodedragstart",r[2]),e.$on("nodedragstop",r[5]),e.$on("nodemousemove",r[3]),{c(){L(e.$$.fragment)},l(n){P(e.$$.fragment,n)},m(n,t){V(e,n,t),l=!0},p(n,t){const s={};t&1&&(s.node=n[11]),e.$set(s)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){z(e.$$.fragment,n),l=!1},d(n){B(e,n)}}}function Ve(r){let e,l,n=W(r[0]),t=[];for(let o=0;o<n.length;o+=1)t[o]=ae(le(r,n,o));const s=o=>z(t[o],1,1,()=>{t[o]=null});return{c(){for(let o=0;o<t.length;o+=1)t[o].c();e=q()},l(o){for(let a=0;a<t.length;a+=1)t[a].l(o);e=q()},m(o,a){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(o,a);D(o,e,a),l=!0},p(o,a){if(a&61){n=W(o[0]);let i;for(i=0;i<n.length;i+=1){const f=le(o,n,i);t[i]?(t[i].p(f,a),E(t[i],1)):(t[i]=ae(f),t[i].c(),E(t[i],1),t[i].m(e.parentNode,e))}for(ue(),i=n.length;i<t.length;i+=1)s(i);fe()}},i(o){if(!l){for(let a=0;a<n.length;a+=1)E(t[a]);l=!0}},o(o){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)z(t[a]);l=!1},d(o){o&&p(e),ce(t,o)}}}function Be(r){let e,l,n,t;return e=new ke({props:{$$slots:{default:[Pe]},$$scope:{ctx:r}}}),n=new Se({props:{$$slots:{default:[Ve]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment),l=X(),L(n.$$.fragment)},l(s){P(e.$$.fragment,s),l=O(s),P(n.$$.fragment,s)},m(s,o){V(e,s,o),D(s,l,o),V(n,s,o),t=!0},p(s,o){const a={};o&131074&&(a.$$scope={dirty:o,ctx:s}),e.$set(a);const i={};o&131073&&(i.$$scope={dirty:o,ctx:s}),n.$set(i)},i(s){t||(E(e.$$.fragment,s),E(n.$$.fragment,s),t=!0)},o(s){z(e.$$.fragment,s),z(n.$$.fragment,s),t=!1},d(s){s&&p(l),B(e,s),B(n,s)}}}function Xe(r){let e,l,n;return l=new ye({props:{width:600,height:400,$$slots:{default:[Be]},$$scope:{ctx:r}}}),{c(){e=k("div"),L(l.$$.fragment)},l(t){e=I(t,"DIV",{});var s=y(e);P(l.$$.fragment,s),s.forEach(p)},m(t,s){D(t,e,s),V(l,e,null),n=!0},p(t,[s]){const o={};s&131075&&(o.$$scope={dirty:s,ctx:t}),l.$set(o)},i(t){n||(E(l.$$.fragment,t),n=!0)},o(t){z(l.$$.fragment,t),n=!1},d(t){t&&p(e),B(l)}}}function Oe(r,e,l){let n,t;K.subscribe(d=>{if(l(0,n=d),t&&t.length){const _=se(t,n);Y.set(_)}}),Y.subscribe(d=>{l(1,t=d)}),de(()=>{if(t&&n){const d=se(t,n);Y.set(d)}});let s=[],o=0,a=0,i=!1;const f=d=>{oe(d.detail.event),i=!0,m(d.detail.node);let _=d.detail.node,x=te(d.detail.event);o=x.x-_.position.x,a=x.y-_.position.y},g=d=>{if(oe(d.detail.event),i&&s.length){let _=n.filter(w=>s.includes(w.id)).pop(),x=te(d.detail.event);K.set(n.map(w=>_.id===w.id?{...w,position:{x:x.x-o,y:x.y-a}}:w))}},v=d=>{},m=d=>{s.length&&s[0]===d.id?s=[]:s=[d.id]};return[n,t,f,g,v,()=>{i=!1}]}class Ue extends N{constructor(e){super(),T(this,e,Oe,Xe,H,{})}}function Ye(r){let e,l,n,t,s,o=`<span class="welcome"></span>

		Hieragram Svelte Demo`,a,i,f;return i=new Ue({}),{c(){e=k("meta"),l=k("link"),n=X(),t=k("section"),s=k("h1"),s.innerHTML=o,a=X(),L(i.$$.fragment),this.h()},l(g){const v=ve("svelte-ynxkq2",document.head);e=I(v,"META",{name:!0,content:!0}),l=I(v,"LINK",{rel:!0,href:!0}),v.forEach(p),n=O(g),t=I(g,"SECTION",{class:!0});var m=y(t);s=I(m,"H1",{class:!0,"data-svelte-h":!0}),G(s)!=="svelte-ur1jd9"&&(s.innerHTML=o),a=O(m),P(i.$$.fragment,m),m.forEach(p),this.h()},h(){document.title="Hiergram",c(e,"name","description"),c(e,"content","Svelte demo app"),c(l,"rel","stylesheet"),c(l,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),c(s,"class","svelte-12om222"),c(t,"class","svelte-12om222")},m(g,v){b(document.head,e),b(document.head,l),D(g,n,v),D(g,t,v),b(t,s),b(t,a),V(i,t,null),f=!0},p:j,i(g){f||(E(i.$$.fragment,g),f=!0)},o(g){z(i.$$.fragment,g),f=!1},d(g){g&&(p(n),p(t)),p(e),p(l),B(i)}}}function qe(r){let e=[{id:"edge1",fromId:"node1",toId:"node2",data:{label:"edge 1"}}],l=[{id:"node1",position:{x:100,y:100},size:{width:160,height:60},data:{label:"node 1"}},{id:"node2",position:{x:400,y:100},size:{width:160,height:60},data:{label:"node 2"}}];return K.set(l),Y.set(e),[]}class Je extends N{constructor(e){super(),T(this,e,qe,Ye,H,{})}}export{Je as component,Ke as universal};
