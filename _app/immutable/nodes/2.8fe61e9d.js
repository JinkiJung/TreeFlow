import{s as be,v as Fe,B as ae,C as de,h as T,d as v,j as m,k as p,i as X,w as P,x as Re,y as He,z as Xe,f as R,g as H,D as dt,u as ye,o as Ye,p as Ce,l as ht,m as ut,E as Q,n as Ut,F as Te,G as We,a as ee,c as te,H as _e,I as Je,e as me,J as Ge,K as Nt,r as Qe}from"../chunks/scheduler.7d5d85ff.js";import{S as we,i as ke,a as A,t as j,b as ne,d as se,m as oe,e as le,g as ze,c as De}from"../chunks/index.deab6082.js";import{w as ft}from"../chunks/index.efd249ef.js";function Ue(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const Mt=!0,gi=Object.freeze(Object.defineProperty({__proto__:null,prerender:Mt},Symbol.toStringTag,{value:"Module"}));function Ze(t){let e,i;return{c(){e=ae("pattern"),i=ae("circle"),this.h()},l(s){e=de(s,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var n=T(e);i=de(n,"circle",{fill:!0,cx:!0,cy:!0,r:!0}),T(i).forEach(v),n.forEach(v),this.h()},h(){m(i,"fill","#AAAAAA"),m(i,"cx","0"),m(i,"cy","0"),m(i,"r","1"),m(e,"id","dots"),m(e,"x","0"),m(e,"y","0"),m(e,"width","20"),m(e,"height","20"),m(e,"patternUnits","userSpaceOnUse")},m(s,n){X(s,e,n),P(e,i)},d(s){s&&v(e)}}}function Bt(t){let e,i,s,n,l,a,r,o,d=t[2]&&Ze();const f=t[4].default,u=Fe(f,t,t[3],null);return{c(){e=ae("svg"),i=ae("defs"),d&&d.c(),s=ae("filter"),n=ae("feDropShadow"),l=ae("g"),a=ae("rect"),r=ae("g"),u&&u.c(),this.h()},l(y){e=de(y,"svg",{style:!0,xmlns:!0});var c=T(e);i=de(c,"defs",{});var b=T(i);d&&d.l(b),s=de(b,"filter",{id:!0,x:!0,y:!0,width:!0,height:!0});var S=T(s);n=de(S,"feDropShadow",{dx:!0,dy:!0,stdDeviation:!0,"flood-color":!0,"flood-opacity":!0}),T(n).forEach(v),S.forEach(v),b.forEach(v),l=de(c,"g",{id:!0,filter:!0});var I=T(l);a=de(I,"rect",{id:!0,width:!0,height:!0,fill:!0}),T(a).forEach(v),r=de(I,"g",{id:!0});var g=T(r);u&&u.l(g),g.forEach(v),I.forEach(v),c.forEach(v),this.h()},h(){m(n,"dx","0"),m(n,"dy","0"),m(n,"stdDeviation","0.5"),m(n,"flood-color","#000000"),m(n,"flood-opacity","0.5"),m(s,"id","shadow"),m(s,"x","-50%"),m(s,"y","-50%"),m(s,"width","200%"),m(s,"height","200%"),m(a,"id","canvas-bg"),m(a,"width","100%"),m(a,"height","100%"),m(a,"fill","url(#dots)"),m(r,"id","canvas-content"),m(l,"id","canvas"),m(l,"filter","url(#shadow)"),p(e,"position","absolute"),p(e,"top","0"),p(e,"left","0"),p(e,"width",t[0]+"px"),p(e,"height",t[1]+"px"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(y,c){X(y,e,c),P(e,i),d&&d.m(i,null),P(i,s),P(s,n),P(e,l),P(l,a),P(l,r),u&&u.m(r,null),o=!0},p(y,[c]){y[2]?d||(d=Ze(),d.c(),d.m(i,s)):d&&(d.d(1),d=null),u&&u.p&&(!o||c&8)&&Re(u,f,y,y[3],o?Xe(f,y[3],c,null):He(y[3]),null),(!o||c&1)&&p(e,"width",y[0]+"px"),(!o||c&2)&&p(e,"height",y[1]+"px")},i(y){o||(A(u,y),o=!0)},o(y){j(u,y),o=!1},d(y){y&&v(e),d&&d.d(),u&&u.d(y)}}}function Lt(t,e,i){let{$$slots:s={},$$scope:n}=e,{width:l=0}=e,{height:a=0}=e,{hasBackground:r=!1}=e;return t.$$set=o=>{"width"in o&&i(0,l=o.width),"height"in o&&i(1,a=o.height),"hasBackground"in o&&i(2,r=o.hasBackground),"$$scope"in o&&i(3,n=o.$$scope)},[l,a,r,n,s]}class Ot extends we{constructor(e){super(),ke(this,e,Lt,Bt,be,{width:0,height:1,hasBackground:2})}}const ie=ft([]),Ne=ft([]),G=24,At=4,Ie=100,ge=G*At;var Pt={exports:{}};(function(t){var e=(()=>{var i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(D,_,k)=>_ in D?i(D,_,{enumerable:!0,configurable:!0,writable:!0,value:k}):D[_]=k,d=(D,_)=>{for(var k in _||(_={}))a.call(_,k)&&o(D,k,_[k]);if(l)for(var k of l(_))r.call(_,k)&&o(D,k,_[k]);return D},f=(D,_)=>{for(var k in _)i(D,k,{get:_[k],enumerable:!0})},u=(D,_,k,q)=>{if(_&&typeof _=="object"||typeof _=="function")for(let F of n(_))!a.call(D,F)&&F!==k&&i(D,F,{get:()=>_[F],enumerable:!(q=s(_,F))||q.enumerable});return D},y=D=>u(i({},"__esModule",{value:!0}),D),c=(D,_,k)=>(o(D,typeof _!="symbol"?_+"":_,k),k),b={};f(b,{DEFAULT_OPTIONS:()=>g,DEFAULT_UUID_LENGTH:()=>I,default:()=>N});var S="5.0.3",I=6,g={dictionary:"alphanum",shuffle:!0,debug:!1,length:I,counter:0},U=class{constructor(_={}){c(this,"counter"),c(this,"debug"),c(this,"dict"),c(this,"version"),c(this,"dictIndex",0),c(this,"dictRange",[]),c(this,"lowerBound",0),c(this,"upperBound",0),c(this,"dictLength",0),c(this,"uuidLength"),c(this,"_digit_first_ascii",48),c(this,"_digit_last_ascii",58),c(this,"_alpha_lower_first_ascii",97),c(this,"_alpha_lower_last_ascii",123),c(this,"_hex_last_ascii",103),c(this,"_alpha_upper_first_ascii",65),c(this,"_alpha_upper_last_ascii",91),c(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),c(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),c(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),c(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),c(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),c(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),c(this,"log",(...C)=>{const M=[...C];if(M[0]=`[short-unique-id] ${C[0]}`,this.debug===!0&&typeof console<"u"&&console!==null)return console.log(...M)}),c(this,"setDictionary",(C,M)=>{let L;if(C&&Array.isArray(C)&&C.length>1)L=C;else{L=[];let V;this.dictIndex=V=0;const J=`_${C}_dict_ranges`,Y=this._dict_ranges[J];Object.keys(Y).forEach($=>{const ve=$;for(this.dictRange=Y[ve],this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1],this.dictIndex=V=this.lowerBound;this.lowerBound<=this.upperBound?V<this.upperBound:V>this.upperBound;this.dictIndex=this.lowerBound<=this.upperBound?V+=1:V-=1)L.push(String.fromCharCode(this.dictIndex))})}M&&(L=L.sort(()=>Math.random()-.5)),this.dict=L,this.dictLength=this.dict.length,this.setCounter(0)}),c(this,"seq",()=>this.sequentialUUID()),c(this,"sequentialUUID",()=>{let C,M,L="";C=this.counter;do M=C%this.dictLength,C=Math.trunc(C/this.dictLength),L+=this.dict[M];while(C!==0);return this.counter+=1,L}),c(this,"rnd",(C=this.uuidLength||I)=>this.randomUUID(C)),c(this,"randomUUID",(C=this.uuidLength||I)=>{let M,L,V;if(C===null||typeof C>"u"||C<1)throw new Error("Invalid UUID Length Provided");for(M="",V=0;V<C;V+=1)L=parseInt((Math.random()*this.dictLength).toFixed(0),10)%this.dictLength,M+=this.dict[L];return M}),c(this,"fmt",(C,M)=>this.formattedUUID(C,M)),c(this,"formattedUUID",(C,M)=>{const L={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return C.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,J=>{const Y=J.slice(0,2),$=parseInt(J.slice(2),10);return Y==="$s"?L[Y]().padStart($,"0"):Y==="$t"&&M?L[Y]($,M):L[Y]($)})}),c(this,"availableUUIDs",(C=this.uuidLength)=>parseFloat(Math.pow([...new Set(this.dict)].length,C).toFixed(0))),c(this,"approxMaxBeforeCollision",(C=this.availableUUIDs(this.uuidLength))=>parseFloat(Math.sqrt(Math.PI/2*C).toFixed(20))),c(this,"collisionProbability",(C=this.availableUUIDs(this.uuidLength),M=this.uuidLength)=>parseFloat((this.approxMaxBeforeCollision(C)/this.availableUUIDs(M)).toFixed(20))),c(this,"uniqueness",(C=this.availableUUIDs(this.uuidLength))=>{const M=parseFloat((1-this.approxMaxBeforeCollision(C)/C).toFixed(20));return M>1?1:M<0?0:M}),c(this,"getVersion",()=>this.version),c(this,"stamp",(C,M)=>{const L=Math.floor(+(M||new Date)/1e3).toString(16);if(typeof C=="number"&&C===0)return L;if(typeof C!="number"||C<10)throw new Error(["Param finalLength must be a number greater than or equal to 10,","or 0 if you want the raw hexadecimal timestamp"].join(`
`));const V=C-9,J=Math.round(Math.random()*(V>15?15:V)),Y=this.randomUUID(V);return`${Y.substring(0,J)}${L}${Y.substring(J)}${J.toString(16)}`}),c(this,"parseStamp",(C,M)=>{if(M&&!/t0|t[1-9]\d{1,}/.test(M))throw new Error("Cannot extract date from a formated UUID with no timestamp in the format");const L=M?M.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,J=>{const Y={$r:ue=>[...Array(ue)].map(()=>"r").join(""),$s:ue=>[...Array(ue)].map(()=>"s").join(""),$t:ue=>[...Array(ue)].map(()=>"t").join("")},$=J.slice(0,2),ve=parseInt(J.slice(2),10);return Y[$](ve)}).replace(/^(.*?)(t{8,})(.*)$/g,(J,Y,$)=>C.substring(Y.length,Y.length+$.length)):C;if(L.length===8)return new Date(parseInt(L,16)*1e3);if(L.length<10)throw new Error("Stamp length invalid");const V=parseInt(L.substring(L.length-1),16);return new Date(parseInt(L.substring(V,V+8),16)*1e3)}),c(this,"setCounter",C=>{this.counter=C});const k=d(d({},g),_);this.counter=0,this.debug=!1,this.dict=[],this.version=S;const{dictionary:q,shuffle:F,length:K,counter:re}=k;return this.uuidLength=K,this.setDictionary(q,F),this.setCounter(re),this.debug=k.debug,this.log(this.dict),this.log(`Generator instantiated with Dictionary Size ${this.dictLength} and counter set to ${this.counter}`),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this),this}};c(U,"default",U);var N=U;return y(b)})();t.exports=e.default,typeof window<"u"&&(e=e.default)})(Pt);const Me="_canvas_";function Tt(t){let e,i;const s=t[6].default,n=Fe(s,t,t[5],null);return{c(){e=R("div"),n&&n.c(),this.h()},l(l){e=H(l,"DIV",{id:!0,style:!0,class:!0});var a=T(e);n&&n.l(a),a.forEach(v),this.h()},h(){m(e,"id",t[3]),p(e,"position","relative"),p(e,"top","0"),p(e,"left","0"),p(e,"width",t[1]+"px"),p(e,"height",t[2]+"px"),p(e,"background",t[0]),m(e,"class","nodecanvas svelte-3ffb0y")},m(l,a){X(l,e,a),n&&n.m(e,null),i=!0},p(l,[a]){n&&n.p&&(!i||a&32)&&Re(n,s,l,l[5],i?Xe(s,l[5],a,null):He(l[5]),null),(!i||a&8)&&m(e,"id",l[3]),(!i||a&2)&&p(e,"width",l[1]+"px"),(!i||a&4)&&p(e,"height",l[2]+"px"),(!i||a&1)&&p(e,"background",l[0])},i(l){i||(A(n,l),i=!0)},o(l){j(n,l),i=!1},d(l){l&&v(e),n&&n.d(l)}}}function xt(t,e,i){let s,{$$slots:n={},$$scope:l}=e,{backgroundColor:a="rgba(230,230,230,0.1)"}=e,{owningNode:r=""}=e,{width:o=0}=e,{height:d=0}=e;const f=ie.subscribe(u=>{});return dt(()=>{f()}),t.$$set=u=>{"backgroundColor"in u&&i(0,a=u.backgroundColor),"owningNode"in u&&i(4,r=u.owningNode),"width"in u&&i(1,o=u.width),"height"in u&&i(2,d=u.height),"$$scope"in u&&i(5,l=u.$$scope)},t.$$.update=()=>{t.$$.dirty&16&&i(3,s=Me+r)},[a,o,d,s,r,l,n]}class ct extends we{constructor(e){super(),ke(this,e,xt,Tt,be,{backgroundColor:0,owningNode:4,width:1,height:2})}}function qt(t){let e;return{c(){e=ae("path"),this.h()},l(i){e=de(i,"path",{stroke:!0,fill:!0}),T(e).forEach(v),this.h()},h(){m(e,"stroke","gray"),m(e,"fill","transparent")},m(i,s){X(i,e,s),t[6](e)},p:ye,i:ye,o:ye,d(i){i&&v(e),t[6](null)}}}function jt(t,e,i){var u,y,c,b;let{edge:s}=e,n=(u=s.from)==null?void 0:u.x,l=(y=s.from)==null?void 0:y.y,a=(c=s.to)==null?void 0:c.x,r=(b=s.to)==null?void 0:b.y,o;Ye(()=>{s.from&&s.to&&o.setAttribute("d",d(a,r,n,l))});const d=(S,I,g,U,N=!0)=>{if(N){let _=Math.abs(S-g)*.675,k=g-_,q=S+_;return`M${g} ${U} C ${k} ${U} ${q} ${I} ${S} ${I}`}else{let _=Math.abs(I-U)*.675,k=U-_,q=I+_;return`M${g} ${U} C ${g} ${k} ${S} ${q} ${S} ${I}`}};function f(S){Ce[S?"unshift":"push"](()=>{o=S,i(0,o)})}return t.$$set=S=>{"edge"in S&&i(1,s=S.edge)},t.$$.update=()=>{var S,I,g,U;t.$$.dirty&63&&o&&s.from&&s.to&&(i(2,n=(S=s.from)==null?void 0:S.x),i(3,l=(I=s.from)==null?void 0:I.y),i(4,a=(g=s.to)==null?void 0:g.x),i(5,r=(U=s.to)==null?void 0:U.y),o.setAttribute("d",d(n,l,a,r)))},[o,s,n,l,a,r,f]}class gt extends we{constructor(e){super(),ke(this,e,jt,qt,be,{edge:1})}}var he=(t=>(t.None="none",t.Top="top",t.TopRight="top-right",t.Right="right",t.BottomRight="bottom-right",t.Bottom="bottom",t.BottomLeft="bottom-left",t.Left="left",t.TopLeft="top-left",t))(he||{}),x=(t=>(t.Start="start",t.End="end",t))(x||{});const Vt=t=>"clientX"in t,Ee=(t,e)=>{var l,a;const i=Vt(t),s=i?t.clientX:(l=t.touches)==null?void 0:l[0].clientX,n=i?t.clientY:(a=t.touches)==null?void 0:a[0].clientY;return{x:s-((e==null?void 0:e.left)??0),y:n-((e==null?void 0:e.top)??0)}},Se=(t,e)=>e===x.Start?{x:t.position.x+G/2,y:t.position.y+G/2}:e===x.End?{x:t.position.x+t.size.width-G/2,y:t.position.y+t.size.height-G/2}:{x:0,y:0},$e=(t,e)=>{for(const i of t){if(i.fromId&&i.fromType){const s=e.find(n=>n.id===i.fromId);if(s){const n=Se(s,i.fromType);i.from=n}}if(i.toId&&i.toType){const s=e.find(n=>n.id===i.toId);if(s){const n=Se(s,i.toType);i.to=n}}}return t},Ft=t=>{let e=!1;return"which"in t?e=t.which==3:"button"in t&&(e=t.button==2),e},pt=()=>({position:{x:10,y:10},size:{width:160,height:60},data:{label:""},startLinker:{type:x.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:x.End,connected:!1,highlighted:!1,selected:!1},depth:0});function Rt(t){let e,i=t[3].toString()+"",s,n,l;return{c(){e=R("div"),s=ht(i),this.h()},l(a){e=H(a,"DIV",{class:!0,role:!0,style:!0,tabindex:!0});var r=T(e);s=ut(r,i),r.forEach(v),this.h()},h(){m(e,"class","p-0"),m(e,"role","button"),p(e,"height",t[1]+"px"),p(e,"border",(t[0].selected?2:1)+"px solid "+(t[0].selected?"red":"black")),p(e,"user-select","none"),p(e,"box-sizing","border-box"),m(e,"tabindex","0")},m(a,r){X(a,e,r),P(e,s),n||(l=[Q(e,"mousedown",t[5]),Q(e,"mouseup",t[6]),Q(e,"mouseenter",t[7])],n=!0)},p(a,[r]){r&8&&i!==(i=a[3].toString()+"")&&Ut(s,i),r&2&&p(e,"height",a[1]+"px"),r&1&&p(e,"border",(a[0].selected?2:1)+"px solid "+(a[0].selected?"red":"black"))},i:ye,o:ye,d(a){a&&v(e),n=!1,Te(l)}}}function Ht(t,e,i){let{data:s}=e,{edgelinkSize:n=0}=e,{node:l}=e,{type:a=x.Start}=e;const r=We(),o=u=>r("linkstart",{node:l,type:a,event:u}),d=u=>r("linkend",{node:l,type:a,event:u}),f=u=>r("linkoverlap",{node:l,type:a,event:u});return t.$$set=u=>{"data"in u&&i(0,s=u.data),"edgelinkSize"in u&&i(1,n=u.edgelinkSize),"node"in u&&i(2,l=u.node),"type"in u&&i(3,a=u.type)},[s,n,l,a,r,o,d,f]}class et extends we{constructor(e){super(),ke(this,e,Ht,Rt,be,{data:0,edgelinkSize:1,node:2,type:3})}}function Xt(t){let e,i,s,n,l,a,r,o,d,f,u,y,c;const b=t[8].default,S=Fe(b,t,t[7],null);return{c(){e=R("div"),i=R("div"),S&&S.c(),s=ee(),n=R("div"),l=ee(),a=R("div"),r=ee(),o=R("div"),d=ee(),f=R("div"),this.h()},l(I){e=H(I,"DIV",{style:!0});var g=T(e);i=H(g,"DIV",{style:!0});var U=T(i);S&&S.l(U),U.forEach(v),s=te(g),n=H(g,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),T(n).forEach(v),l=te(g),a=H(g,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),T(a).forEach(v),r=te(g),o=H(g,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),T(o).forEach(v),d=te(g),f=H(g,"DIV",{class:!0,style:!0,role:!0,tabindex:!0}),T(f).forEach(v),g.forEach(v),this.h()},h(){p(i,"position","absolute"),m(n,"class","hoverable svelte-gbjq08"),p(n,"position","absolute"),p(n,"top","0"),p(n,"left","0"),p(n,"right","0"),p(n,"height",Pe+"px"),p(n,"cursor","ns-resize"),m(n,"role","button"),m(n,"tabindex","0"),m(a,"class","hoverable svelte-gbjq08"),p(a,"position","absolute"),p(a,"bottom","0"),p(a,"left","0"),p(a,"right","0"),p(a,"height",Pe+"px"),p(a,"cursor","ns-resize"),m(a,"role","button"),m(a,"tabindex","0"),m(o,"class","hoverable svelte-gbjq08"),p(o,"position","absolute"),p(o,"top","0"),p(o,"bottom","0"),p(o,"left","0"),p(o,"width",Pe+"px"),p(o,"cursor","ew-resize"),m(o,"role","button"),m(o,"tabindex","0"),m(f,"class","hoverable svelte-gbjq08"),p(f,"position","absolute"),p(f,"top","0"),p(f,"bottom","0"),p(f,"right","0"),p(f,"width",Pe+"px"),p(f,"cursor","ew-resize"),m(f,"role","button"),m(f,"tabindex","0"),p(e,"position","relative"),p(e,"width",t[0]+"px"),p(e,"height",t[1]+"px"),p(e,"background",t[3]),p(e,"outline",(t[4]?"2":"1")+"px solid "+(t[4]?"red":"black"))},m(I,g){X(I,e,g),P(e,i),S&&S.m(i,null),P(e,s),P(e,n),P(e,l),P(e,a),P(e,r),P(e,o),P(e,d),P(e,f),t[13](e),u=!0,y||(c=[Q(n,"mousedown",t[9]),Q(a,"mousedown",t[10]),Q(o,"mousedown",t[11]),Q(f,"mousedown",t[12])],y=!0)},p(I,[g]){S&&S.p&&(!u||g&128)&&Re(S,b,I,I[7],u?Xe(b,I[7],g,null):He(I[7]),null),(!u||g&1)&&p(e,"width",I[0]+"px"),(!u||g&2)&&p(e,"height",I[1]+"px"),(!u||g&8)&&p(e,"background",I[3]),(!u||g&16)&&p(e,"outline",(I[4]?"2":"1")+"px solid "+(I[4]?"red":"black"))},i(I){u||(A(S,I),u=!0)},o(I){j(S,I),u=!1},d(I){I&&v(e),S&&S.d(I),t[13](null),y=!1,Te(c)}}}const Pe=5;function Yt(t,e,i){let{$$slots:s={},$$scope:n}=e,{width:l=400}=e,{height:a=200}=e,{owningNode:r=""}=e,{backgroundColor:o="rgba(230,230,230,0.1)"}=e,{highlightOutline:d=!1}=e,f;const u=We(),y=g=>u("resizestart",{nodeId:r,direction:he.Top,event:g}),c=g=>u("resizestart",{nodeId:r,direction:he.Bottom,event:g}),b=g=>u("resizestart",{nodeId:r,direction:he.Left,event:g}),S=g=>u("resizestart",{nodeId:r,direction:he.Right,event:g});function I(g){Ce[g?"unshift":"push"](()=>{f=g,i(5,f)})}return t.$$set=g=>{"width"in g&&i(0,l=g.width),"height"in g&&i(1,a=g.height),"owningNode"in g&&i(2,r=g.owningNode),"backgroundColor"in g&&i(3,o=g.backgroundColor),"highlightOutline"in g&&i(4,d=g.highlightOutline),"$$scope"in g&&i(7,n=g.$$scope)},[l,a,r,o,d,f,u,n,s,y,c,b,S,I]}class Wt extends we{constructor(e){super(),ke(this,e,Yt,Xt,be,{width:0,height:1,owningNode:2,backgroundColor:3,highlightOutline:4})}}const Gt=t=>t<ge?ge:t,_t=t=>({width:t.width,height:Gt(t.height)}),mt=(t,e,i,s,n)=>{if(e.length===0)return _t({width:i,height:s});const l=e.map(d=>{const f=t.filter(u=>u.id===d).pop();return f?{x:f.position.x+f.size.width,y:f.position.y+f.size.height}:{x:0,y:0}}),a=Math.max(...l.map(d=>d.x)),r=Math.max(...l.map(d=>d.y));return{width:a+20,height:r+40+n}};function tt(t,e,i){const s=t.slice();return s[40]=e[i],s}function Kt(t){let e,i,s,n;return{c(){e=R("button"),i=ht("+"),this.h()},l(l){e=H(l,"BUTTON",{class:!0,style:!0});var a=T(e);i=ut(a,"+"),a.forEach(v),this.h()},h(){m(e,"class","addBtn svelte-153ha10"),p(e,"width",t[14]+"px"),p(e,"height",G+"px")},m(l,a){X(l,e,a),P(e,i),s||(n=Q(e,"click",t[28]),s=!0)},p(l,a){a[0]&16384&&p(e,"width",l[14]+"px")},i:ye,o:ye,d(l){l&&v(e),s=!1,n()}}}function Jt(t){let e,i,s=Ue(t[10]||[]),n=[];for(let a=0;a<s.length;a+=1)n[a]=it(tt(t,s,a));const l=a=>j(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=me()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=me()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);X(a,e,r),i=!0},p(a,r){if(r[0]&1535){s=Ue(a[10]||[]);let o;for(o=0;o<s.length;o+=1){const d=tt(a,s,o);n[o]?(n[o].p(d,r),A(n[o],1)):(n[o]=it(d),n[o].c(),A(n[o],1),n[o].m(e.parentNode,e))}for(ze(),o=s.length;o<n.length;o+=1)l(o);De()}},i(a){if(!i){for(let r=0;r<s.length;r+=1)A(n[r]);i=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)j(n[r]);i=!1},d(a){a&&v(e),Ge(n,a)}}}function it(t){let e,i;return e=new bt({props:{nodes:t[0],nodeId:t[40].id,backgroundColor:t[1],handleMousedown:t[5],handleMouseup:t[6],linkEdgeStart:t[2],linkEdgeEnd:t[3],linkEdgeOverlap:t[4],resizeStart:t[7],addChild:t[8]}}),e.$on("nodedragstart",function(){_e(t[5])&&t[5].apply(this,arguments)}),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,n){oe(e,s,n),i=!0},p(s,n){t=s;const l={};n[0]&1&&(l.nodes=t[0]),n[0]&1024&&(l.nodeId=t[40].id),n[0]&2&&(l.backgroundColor=t[1]),n[0]&32&&(l.handleMousedown=t[5]),n[0]&64&&(l.handleMouseup=t[6]),n[0]&4&&(l.linkEdgeStart=t[2]),n[0]&8&&(l.linkEdgeEnd=t[3]),n[0]&16&&(l.linkEdgeOverlap=t[4]),n[0]&128&&(l.resizeStart=t[7]),n[0]&256&&(l.addChild=t[8]),e.$set(l)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){le(e,s)}}}function Qt(t){let e,i,s,n,l,a,r,o,d,f,u,y,c,b,S,I,g;i=new et({props:{edgelinkSize:G,node:t[9],data:t[9].startLinker,type:x.Start}}),i.$on("linkstart",function(){_e(t[2])&&t[2].apply(this,arguments)}),i.$on("linkend",function(){_e(t[3])&&t[3].apply(this,arguments)}),i.$on("linkoverlap",function(){_e(t[4])&&t[4].apply(this,arguments)});const U=[Jt,Kt],N=[];function D(_,k){return _[19]?0:1}return o=D(t),d=N[o]=U[o](t),b=new et({props:{edgelinkSize:G,node:t[9],data:t[9].endLinker,type:x.End}}),b.$on("linkstart",function(){_e(t[2])&&t[2].apply(this,arguments)}),b.$on("linkend",function(){_e(t[3])&&t[3].apply(this,arguments)}),b.$on("linkoverlap",function(){_e(t[4])&&t[4].apply(this,arguments)}),{c(){e=R("div"),ne(i.$$.fragment),s=ee(),n=R("div"),l=R("input"),a=ee(),r=R("div"),d.c(),f=ee(),u=R("div"),y=R("div"),c=ee(),ne(b.$$.fragment),this.h()},l(_){e=H(_,"DIV",{class:!0,style:!0});var k=T(e);se(i.$$.fragment,k),k.forEach(v),s=te(_),n=H(_,"DIV",{class:!0});var q=T(n);l=H(q,"INPUT",{type:!0,class:!0,style:!0}),q.forEach(v),a=te(_),r=H(_,"DIV",{class:!0,style:!0});var F=T(r);d.l(F),F.forEach(v),f=te(_),u=H(_,"DIV",{class:!0,style:!0});var K=T(u);y=H(K,"DIV",{}),T(y).forEach(v),c=te(K),se(b.$$.fragment,K),K.forEach(v),this.h()},h(){m(e,"class","d-flex justify-content-between iil-section condition svelte-153ha10"),p(e,"height",G+"px"),m(l,"type","text"),m(l,"class","p-0 m-0"),p(l,"width","100%"),p(l,"height",G+"px"),p(l,"border","0px solid black"),m(n,"class","iil-section svelte-153ha10"),m(r,"class","d-flex justify-content-between iil-section svelte-153ha10"),p(r,"width",t[14]+"px"),p(r,"height",t[15]-G*(t[21]-1)+"px"),m(u,"class","d-flex justify-content-between iil-section condition svelte-153ha10"),p(u,"height",G+"px")},m(_,k){X(_,e,k),oe(i,e,null),X(_,s,k),X(_,n,k),P(n,l),t[25](l),Je(l,t[17]),X(_,a,k),X(_,r,k),N[o].m(r,null),X(_,f,k),X(_,u,k),P(u,y),P(u,c),oe(b,u,null),S=!0,I||(g=[Q(l,"input",t[26]),Q(l,"click",t[27])],I=!0)},p(_,k){t=_;const q={};k[0]&512&&(q.node=t[9]),k[0]&512&&(q.data=t[9].startLinker),i.$set(q),k[0]&131072&&l.value!==t[17]&&Je(l,t[17]);let F=o;o=D(t),o===F?N[o].p(t,k):(ze(),j(N[F],1,1,()=>{N[F]=null}),De(),d=N[o],d?d.p(t,k):(d=N[o]=U[o](t),d.c()),A(d,1),d.m(r,null)),(!S||k[0]&16384)&&p(r,"width",t[14]+"px"),(!S||k[0]&32768)&&p(r,"height",t[15]-G*(t[21]-1)+"px");const K={};k[0]&512&&(K.node=t[9]),k[0]&512&&(K.data=t[9].endLinker),b.$set(K)},i(_){S||(A(i.$$.fragment,_),A(d),A(b.$$.fragment,_),S=!0)},o(_){j(i.$$.fragment,_),j(d),j(b.$$.fragment,_),S=!1},d(_){_&&(v(e),v(s),v(n),v(a),v(r),v(f),v(u)),le(i),t[25](null),N[o].d(),le(b),I=!1,Te(g)}}}function Zt(t){let e,i;return e=new ct({props:{backgroundColor:"rgba(230,230,230,0.0)",owningNode:t[9].id,width:t[14],height:t[15],$$slots:{default:[Qt]},$$scope:{ctx:t}}}),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,n){oe(e,s,n),i=!0},p(s,n){const l={};n[0]&512&&(l.owningNode=s[9].id),n[0]&16384&&(l.width=s[14]),n[0]&32768&&(l.height=s[15]),n[0]&968703|n[1]&4096&&(l.$$scope={dirty:n,ctx:s}),e.$set(l)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){le(e,s)}}}function $t(t){let e,i,s,n,l,a;return i=new Wt({props:{owningNode:t[9].id,width:t[14],height:t[15],backgroundColor:t[1],highlightOutline:t[13],$$slots:{default:[Zt]},$$scope:{ctx:t}}}),i.$on("resizestart",function(){_e(t[7])&&t[7].apply(this,arguments)}),{c(){e=R("div"),ne(i.$$.fragment),this.h()},l(r){e=H(r,"DIV",{id:!0,role:!0,class:!0,style:!0,tabindex:!0});var o=T(e);se(i.$$.fragment,o),o.forEach(v),this.h()},h(){m(e,"id",s=t[9].id),m(e,"role","button"),m(e,"class","iil-container unselectable svelte-153ha10"),p(e,"top",t[12]+"px"),p(e,"left",t[11]+"px"),m(e,"tabindex","0")},m(r,o){X(r,e,o),oe(i,e,null),t[29](e),n=!0,l||(a=[Q(e,"click",t[30]),Q(e,"keydown",ei),Q(e,"mousedown",t[31]),Q(e,"mouseenter",t[32]),Q(e,"mouseleave",t[33]),Q(e,"mousemove",t[34]),Q(e,"contextmenu",t[35])],l=!0)},p(r,o){t=r;const d={};o[0]&512&&(d.owningNode=t[9].id),o[0]&16384&&(d.width=t[14]),o[0]&32768&&(d.height=t[15]),o[0]&2&&(d.backgroundColor=t[1]),o[0]&8192&&(d.highlightOutline=t[13]),o[0]&968703|o[1]&4096&&(d.$$scope={dirty:o,ctx:t}),i.$set(d),(!n||o[0]&512&&s!==(s=t[9].id))&&m(e,"id",s),(!n||o[0]&4096)&&p(e,"top",t[12]+"px"),(!n||o[0]&2048)&&p(e,"left",t[11]+"px")},i(r){n||(A(i.$$.fragment,r),n=!0)},o(r){j(i.$$.fragment,r),n=!1},d(r){r&&v(e),le(i),t[29](null),l=!1,Te(a)}}}const ei=t=>{};function ti(t,e,i){const s=We();let{nodes:n=[]}=e,{nodeId:l=""}=e,{backgroundColor:a="rgba(0,0,0,0.0)"}=e,{linkEdgeStart:r}=e,{linkEdgeEnd:o}=e,{linkEdgeOverlap:d}=e,{handleMousedown:f}=e,{handleMouseup:u}=e,{resizeStart:y}=e,{addChild:c}=e,b=pt(),S=b.position.x,I=b.position.y;b.parent;let g=!1,U=[],N=U.length>0?3:4,D=b.size.width,_=b.size.height<G*N?G*N:b.size.height,k=b.data,q,F=k.label,K,re=!1;Ye(()=>{C()});const C=()=>{const E=U.length;i(10,U=n.filter(pe=>pe.parent===l)),E!==U.length&&M()},M=()=>{const E=mt(n,U.map(pe=>pe.id),D,_,G*N);E.width!==b.size.width&&E.height!==b.size.height&&ie.set(n.map(pe=>pe.id===l?{...b,size:E}:pe))},L=()=>{c(b),M()};function V(E){Ce[E?"unshift":"push"](()=>{K=E,i(18,K)})}function J(){F=this.value,i(17,F),i(0,n),i(23,l),i(9,b),i(10,U),i(24,k)}const Y=E=>K.focus(),$=E=>L();function ve(E){Ce[E?"unshift":"push"](()=>{q=E,i(16,q)})}const ue=E=>s("nodeclick",{node:b,event:E}),xe=E=>s("nodedragstart",{node:b,event:E}),qe=E=>s("nodemouseenter",{node:b,event:E}),Be=E=>s("nodemouseleave",{node:b,event:E}),je=E=>s("nodemousemove",{node:b,event:E}),Ve=E=>s("nodecontextmenu",{node:b,event:E});return t.$$set=E=>{"nodes"in E&&i(0,n=E.nodes),"nodeId"in E&&i(23,l=E.nodeId),"backgroundColor"in E&&i(1,a=E.backgroundColor),"linkEdgeStart"in E&&i(2,r=E.linkEdgeStart),"linkEdgeEnd"in E&&i(3,o=E.linkEdgeEnd),"linkEdgeOverlap"in E&&i(4,d=E.linkEdgeOverlap),"handleMousedown"in E&&i(5,f=E.handleMousedown),"handleMouseup"in E&&i(6,u=E.handleMouseup),"resizeStart"in E&&i(7,y=E.resizeStart),"addChild"in E&&i(8,c=E.addChild)},t.$$.update=()=>{t.$$.dirty[0]&25167361&&(i(9,b=n.filter(E=>E.id===l).pop()),b&&(i(10,U=n.filter(E=>E.parent===l)),i(19,re=U.length>0),i(24,k=b.data),b.parent,i(11,S=b.position.x),i(12,I=b.position.y),i(14,D=b.size.width),i(15,_=b.size.height),i(24,k=b.data),i(17,F=k.label),i(13,g=b.selected)))},[n,a,r,o,d,f,u,y,c,b,U,S,I,g,D,_,q,F,K,re,s,N,L,l,k,V,J,Y,$,ve,ue,xe,qe,Be,je,Ve]}class bt extends we{constructor(e){super(),ke(this,e,ti,$t,be,{nodes:0,nodeId:23,backgroundColor:1,linkEdgeStart:2,linkEdgeEnd:3,linkEdgeOverlap:4,handleMousedown:5,handleMouseup:6,resizeStart:7,addChild:8},null,[-1,-1])}}function nt(t,e,i){const s=t.slice();return s[51]=e[i],s}function st(t,e,i){const s=t.slice();return s[54]=e[i],s}function ot(t){let e,i;return e=new gt({props:{edge:t[54]}}),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,n){oe(e,s,n),i=!0},p(s,n){const l={};n[0]&16&&(l.edge=s[54]),e.$set(l)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){le(e,s)}}}function lt(t){let e,i;return e=new gt({props:{edge:t[5]}}),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,n){oe(e,s,n),i=!0},p(s,n){const l={};n[0]&32&&(l.edge=s[5]),e.$set(l)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){le(e,s)}}}function ii(t){let e,i,s,n=Ue(t[4]),l=[];for(let o=0;o<n.length;o+=1)l[o]=ot(st(t,n,o));const a=o=>j(l[o],1,1,()=>{l[o]=null});let r=t[5]&&lt(t);return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=ee(),r&&r.c(),i=me()},l(o){for(let d=0;d<l.length;d+=1)l[d].l(o);e=te(o),r&&r.l(o),i=me()},m(o,d){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(o,d);X(o,e,d),r&&r.m(o,d),X(o,i,d),s=!0},p(o,d){if(d[0]&16){n=Ue(o[4]);let f;for(f=0;f<n.length;f+=1){const u=st(o,n,f);l[f]?(l[f].p(u,d),A(l[f],1)):(l[f]=ot(u),l[f].c(),A(l[f],1),l[f].m(e.parentNode,e))}for(ze(),f=n.length;f<l.length;f+=1)a(f);De()}o[5]?r?(r.p(o,d),d[0]&32&&A(r,1)):(r=lt(o),r.c(),A(r,1),r.m(i.parentNode,i)):r&&(ze(),j(r,1,1,()=>{r=null}),De())},i(o){if(!s){for(let d=0;d<n.length;d+=1)A(l[d]);A(r),s=!0}},o(o){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)j(l[d]);j(r),s=!1},d(o){o&&(v(e),v(i)),Ge(l,o),r&&r.d(o)}}}function rt(t){let e,i;return e=new bt({props:{nodes:t[3],nodeId:t[51].id,backgroundColor:li,handleMousedown:t[6],handleMouseup:t[7],linkEdgeStart:t[8],linkEdgeEnd:t[9],linkEdgeOverlap:t[10],resizeStart:t[11],addChild:t[12]}}),e.$on("nodedragstart",t[6]),{c(){ne(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,n){oe(e,s,n),i=!0},p(s,n){const l={};n[0]&8&&(l.nodes=s[3]),n[0]&8&&(l.nodeId=s[51].id),e.$set(l)},i(s){i||(A(e.$$.fragment,s),i=!0)},o(s){j(e.$$.fragment,s),i=!1},d(s){le(e,s)}}}function at(t){let e,i,s=t[51].parent===void 0&&rt(t);return{c(){s&&s.c(),e=me()},l(n){s&&s.l(n),e=me()},m(n,l){s&&s.m(n,l),X(n,e,l),i=!0},p(n,l){n[51].parent===void 0?s?(s.p(n,l),l[0]&8&&A(s,1)):(s=rt(n),s.c(),A(s,1),s.m(e.parentNode,e)):s&&(ze(),j(s,1,1,()=>{s=null}),De())},i(n){i||(A(s),i=!0)},o(n){j(s),i=!1},d(n){n&&v(e),s&&s.d(n)}}}function ni(t){let e,i,s=Ue(t[3]),n=[];for(let a=0;a<s.length;a+=1)n[a]=at(nt(t,s,a));const l=a=>j(n[a],1,1,()=>{n[a]=null});return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=me()},l(a){for(let r=0;r<n.length;r+=1)n[r].l(a);e=me()},m(a,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(a,r);X(a,e,r),i=!0},p(a,r){if(r[0]&8136){s=Ue(a[3]);let o;for(o=0;o<s.length;o+=1){const d=nt(a,s,o);n[o]?(n[o].p(d,r),A(n[o],1)):(n[o]=at(d),n[o].c(),A(n[o],1),n[o].m(e.parentNode,e))}for(ze(),o=s.length;o<n.length;o+=1)l(o);De()}},i(a){if(!i){for(let r=0;r<s.length;r+=1)A(n[r]);i=!0}},o(a){n=n.filter(Boolean);for(let r=0;r<n.length;r+=1)j(n[r]);i=!1},d(a){a&&v(e),Ge(n,a)}}}function si(t){let e,i,s,n,l,a;return s=new Ot({props:{width:t[0],height:t[1],hasBackground:!0,$$slots:{default:[ii]},$$scope:{ctx:t}}}),l=new ct({props:{backgroundColor:oi,owningNode:"root",width:t[0],height:t[1],$$slots:{default:[ni]},$$scope:{ctx:t}}}),{c(){e=R("div"),i=R("div"),ne(s.$$.fragment),n=ee(),ne(l.$$.fragment),this.h()},l(r){e=H(r,"DIV",{});var o=T(e);i=H(o,"DIV",{style:!0});var d=T(i);se(s.$$.fragment,d),n=te(d),se(l.$$.fragment,d),d.forEach(v),o.forEach(v),this.h()},h(){p(i,"position","relative"),p(i,"width",t[0]+"px"),p(i,"height",t[1]+"px")},m(r,o){X(r,e,o),P(e,i),oe(s,i,null),P(i,n),oe(l,i,null),t[14](i),a=!0},p(r,o){const d={};o[0]&1&&(d.width=r[0]),o[0]&2&&(d.height=r[1]),o[0]&48|o[1]&67108864&&(d.$$scope={dirty:o,ctx:r}),s.$set(d);const f={};o[0]&1&&(f.width=r[0]),o[0]&2&&(f.height=r[1]),o[0]&8|o[1]&67108864&&(f.$$scope={dirty:o,ctx:r}),l.$set(f),(!a||o[0]&1)&&p(i,"width",r[0]+"px"),(!a||o[0]&2)&&p(i,"height",r[1]+"px")},i(r){a||(A(s.$$.fragment,r),A(l.$$.fragment,r),a=!0)},o(r){j(s.$$.fragment,r),j(l.$$.fragment,r),a=!1},d(r){r&&v(e),le(s),le(l),t[14](null)}}}let oi="rgba(230,230,230,0.0)",li="rgb(230,230,230)";function ri(t,e,i){let{width:s=0}=e,{height:n=0}=e,l,a=null,r,o,d=pt(),f=[],u=null,y=null,c=0,b=0,S=0,I=0,g=0,U=0,N={x:0,y:0},D={width:0,height:0},_={width:0,height:0},k=!1,q=!1,F=!1,K=he.None,re=null;const C=ie.subscribe(h=>{if(i(3,r=h),o&&o.length){const w=$e(o,r);Ne.set(w)}}),M=Ne.subscribe(h=>{i(4,o=h)});dt(()=>{C(),M()}),Ye(()=>{if(o&&r){const h=$e(o,r);Ne.set(h)}});const L=h=>{if(h.detail.event.stopPropagation(),Ft(h.detail.event)||q||F)return;a=l.getBoundingClientRect(),k=!0,pe(h.detail.node);let w=h.detail.node,z=Ee(h.detail.event,a);c=z.x-w.position.x,b=z.y-w.position.y,document.onmousemove=V,document.onmouseleave=Be,document.onmouseup=J},V=h=>{h.stopPropagation(),a=l.getBoundingClientRect();let w=Ee(h,a);q&&u?E(w):k&&(Ve(w,!0),ve(h))},J=()=>{var h,w;if(k=!1,q=!1,document.onmousemove=null,document.onmouseleave=null,document.onmouseenter=null,f.length&&(ie.set(r.map(z=>f.includes(z.id)?{...z,selected:!1}:z)),y)){const z=((h=y.getAttribute("id"))==null?void 0:h.replace(Me,""))==="root"||(w=y.getAttribute("id"))==null?void 0:w.replace(Me,""),B=r.filter(W=>f.includes(W.id)).map(W=>W.parent).pop();if(z!==B){const W=B?r.filter(O=>B===O.id).pop():void 0,fe=z?r.filter(O=>z===O.id).pop():void 0,Z=$(W),ce=$(fe);ie.set(r.map(O=>{var Oe;if(B&&B.includes(O.id)){const Ae=(Oe=O.children)==null?void 0:Oe.filter(Dt=>!f.includes(Dt));return{...O,children:Ae,size:Ae!=null&&Ae.length?O.size:{width:O.size.width,height:ge}}}return z&&z===O.id?{...O,children:O.children?[...O.children,...f]:f}:f.includes(O.id)?{...O,position:z?Y(O.position.x+(Z==null?void 0:Z.x)-(ce==null?void 0:ce.x),O.position.y+(Z==null?void 0:Z.y)-(ce==null?void 0:ce.y)):{x:O.position.x+(Z==null?void 0:Z.x),y:O.position.y+(Z==null?void 0:Z.y)},parent:z==="root"?void 0:z}:O}))}else ie.set(r.map(W=>f.includes(W.id)?{...W,position:Y(W.position.x,W.position.y)}:W));y.style.setProperty("box-shadow","0px 0px 0px 0px #09A9A9"),y=null}f=[],_={width:0,height:0},u&&i(5,u=null)},Y=(h,w)=>({x:h<0?0:h,y:w<G*2?G*2:w}),$=h=>{if(!h)return{x:0,y:0};let w=h.parent,z={x:h.position.x,y:h.position.y};for(;w;){let B=r.filter(W=>W.id===w).pop();if(B)z.x+=B.position.x,z.y+=B.position.y,w=B.parent;else break}return z},ve=h=>{h.stopPropagation(),a=l.getBoundingClientRect(),Ee(h,a);const w=qe(h.clientX,h.clientY,f[0]);w&&(y!==w&&(y==null||y.style.setProperty("box-shadow","0px 0px 0px 0px #09A9A9")),w==null||w.style.setProperty("box-shadow","0px 0px 0px 4px #09A9A9"),y=w)},ue=(h,w)=>w.getAttribute("id")!==Me+h,xe=(h,w)=>{const z=h.getBoundingClientRect(),B=w.getBoundingClientRect();return!(z.top>B.bottom||z.right<B.left||z.bottom<B.top||z.left>B.right)},qe=(h,w,z)=>{const B=document.elementsFromPoint(h,w),W=document.getElementById(Me+z);return Array.from(B).filter(fe=>fe.classList.contains("nodecanvas")&&ue(z,fe)&&xe(fe,W)).shift()},Be=h=>{h.stopPropagation(),document.onmousemove=null,document.onmouseenter=je},je=h=>{h.stopPropagation(),(h.type==="mousedown"||h.type==="touchstart")&&f.length&&(document.onmousemove=V)},Ve=(h,w)=>{if(f.length){let z=r.filter(B=>f.includes(B.id)).pop();ie.set(r.map(B=>z.id===B.id?{...B,selected:w||!1,position:{x:h.x-c,y:h.y-b}}:B))}},E=h=>{u&&(u.from?i(5,u.to={x:h.x,y:h.y},u):i(5,u.from={x:h.x,y:h.y},u))},pe=h=>{f=[h.id]},wt=h=>{q=!0,h.detail.event.stopPropagation(),a=l.getBoundingClientRect(),h.detail.type===x.Start?i(5,u={id:"new",fromId:h.detail.node.id,fromType:x.Start,from:{...Se(h.detail.node,x.Start)},data:{label:"edge 1"}}):i(5,u={id:"new",toId:h.detail.node.id,toType:x.End,to:{...Se(h.detail.node,x.End)},data:{label:"edge 1"}});let w=Ee(h.detail.event,a);c=w.x-h.detail.node.position.x,b=w.y-h.detail.node.position.y,document.onmousemove=V,document.onmouseleave=Be,document.onmouseup=J},kt=h=>{q=!1,h.detail.event.stopPropagation(),document.onmousemove=null,document.onmouseleave=null,document.onmouseenter=null,i(5,u=null),re&&(Ne.set([...o,re]),ie.set(r),re=null)},vt=h=>{h.detail.event.stopPropagation(),q&&u&&u.fromId!==h.detail.node.id&&(u.fromId&&h.detail.type===x.End?re={...u,id:u.fromId+"-"+h.detail.node.id,toId:h.detail.node.id,toType:x.End,to:{...Se(h.detail.node,h.detail.type)}}:u.toId&&h.detail.type===x.Start&&(re={...u,id:u.fromId+"-"+h.detail.node.id,fromId:h.detail.node.id,fromType:x.Start,from:{...Se(h.detail.node,h.detail.type)}}))},yt=h=>{if(h.parent){const w=r.filter(z=>z.id===h.parent).pop();if(w)return w.size}return{width:s,height:n}},It=h=>{F=!0,h.detail.event.stopPropagation(),K=h.detail.direction,f=[h.detail.nodeId];let w=r.filter(B=>f.includes(B.id)).pop();N=w.position,D=w.size,a=l.getBoundingClientRect(),_=yt(w);let z=Ee(h.detail.event,a);c=z.x-w.position.x-w.size.width,b=z.y-w.position.y-w.size.height,I=z.y-w.position.y,g=z.y,U=z.x,S=z.x,document.onmousemove=Et,document.onmouseup=St},Et=h=>{h.stopPropagation(),a=l.getBoundingClientRect();let w=Ee(h,a);const z=w.x-S,B=w.y-I,W=D.width+(U-w.x),fe=D.height+(g-w.y),Z=D.height-g+w.y,ce=D.width-U+w.x;if(F){let O=r.filter(Oe=>f.includes(Oe.id)).pop();switch(K){case he.Top:Le(O,{width:O.size.width,height:fe<ge?ge:B<0?N.y+D.height:fe},{x:O.position.x,y:B<0?0:fe<ge?N.y+D.height-ge:B});break;case he.Bottom:Le(O,{width:O.size.width,height:D.height-g+w.y<ge?ge:Z+N.y>_.height?_.height-N.y:Z});break;case he.Left:Le(O,{width:W<Ie?Ie:N.x+z<0?N.x+D.width:W,height:O.size.height},{x:N.x+z<0?0:W<Ie?N.x+D.width-Ie:N.x+z,y:O.position.y});break;case he.Right:Le(O,{width:D.width-U+w.x<Ie?Ie:ce+N.x>_.width?_.width-N.x:ce,height:O.size.height});break}}},Le=(h,w,z)=>{f.length&&ie.set(r.map(B=>h.id===B.id?{...h,position:z||h.position,size:w}:B))},St=()=>{F=!1,document.onmousemove=null,document.onmouseleave=null,document.onmouseenter=null},Ke=h=>{const w={...d,id:"node"+(r.length+1),data:{label:"node "+(r.length+1)},parent:h==null?void 0:h.id,depth:h!=null&&h.depth?h.depth+1:0};return ie.set([...r,w]),w},Ct=h=>{const w=Ke(h);return h.children&&h.children.length>0?h.children.push(w.id):h.children=[w.id],w};function zt(h){Ce[h?"unshift":"push"](()=>{l=h,i(2,l)})}return t.$$set=h=>{"width"in h&&i(0,s=h.width),"height"in h&&i(1,n=h.height)},[s,n,l,r,o,u,L,J,wt,kt,vt,It,Ct,Ke,zt]}class ai extends we{constructor(e){super(),ke(this,e,ri,si,be,{width:0,height:1,addNode:13},null,[-1,-1])}get addNode(){return this.$$.ctx[13]}}function di(t){let e,i,s,n,l,a=`<span class="welcome"></span>

		TreeFlow Svelte Demo`,r,o,d,f,u,y="create new",c,b,S,I={width:800,height:600};return d=new ai({props:I}),t[1](d),{c(){e=R("meta"),i=R("link"),s=ee(),n=R("section"),l=R("h1"),l.innerHTML=a,r=ee(),o=R("div"),ne(d.$$.fragment),f=ee(),u=R("button"),u.textContent=y,this.h()},l(g){const U=Nt("svelte-eiu3ux",document.head);e=H(U,"META",{name:!0,content:!0}),i=H(U,"LINK",{rel:!0,href:!0}),U.forEach(v),s=te(g),n=H(g,"SECTION",{class:!0});var N=T(n);l=H(N,"H1",{class:!0,"data-svelte-h":!0}),Qe(l)!=="svelte-db5659"&&(l.innerHTML=a),r=te(N),o=H(N,"DIV",{class:!0});var D=T(o);se(d.$$.fragment,D),f=te(D),u=H(D,"BUTTON",{"data-svelte-h":!0}),Qe(u)!=="svelte-upvblz"&&(u.textContent=y),D.forEach(v),N.forEach(v),this.h()},h(){document.title="TreeFlow",m(e,"name","description"),m(e,"content","Svelte demo app"),m(i,"rel","stylesheet"),m(i,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"),m(l,"class","svelte-39krom"),m(o,"class","container"),m(n,"class","svelte-39krom")},m(g,U){P(document.head,e),P(document.head,i),X(g,s,U),X(g,n,U),P(n,l),P(n,r),P(n,o),oe(d,o,null),P(o,f),P(o,u),c=!0,b||(S=Q(u,"click",t[2]),b=!0)},p(g,[U]){const N={};d.$set(N)},i(g){c||(A(d.$$.fragment,g),c=!0)},o(g){j(d.$$.fragment,g),c=!1},d(g){g&&(v(s),v(n)),v(e),v(i),t[1](null),le(d),b=!1,S()}}}function hi(t,e,i){let s,n=[{id:"edge1",fromId:"node1",fromType:x.End,toType:x.Start,toId:"node2",data:{label:"edge 1"}}],l=[{id:"node1",position:{x:100,y:100},size:{width:160,height:200},data:{label:"node 1"},children:["node4","node3"],startLinker:{type:x.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:x.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node2",position:{x:400,y:100},size:{width:160,height:80},data:{label:"node 2"},startLinker:{type:x.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:x.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node3",position:{x:400,y:200},size:{width:160,height:60},data:{label:"node 3"},parent:"node1",startLinker:{type:x.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:x.End,connected:!1,highlighted:!1,selected:!1},depth:0},{id:"node4",position:{x:100,y:100},size:{width:160,height:60},data:{label:"node 4"},parent:"node1",startLinker:{type:x.Start,connected:!1,highlighted:!1,selected:!1},endLinker:{type:x.End,connected:!1,highlighted:!1,selected:!1},depth:1}];const a=d=>d.map(f=>{if(f.children&&f.children.length>0){const u=d.filter(c=>f.children.includes(c.id)),y=mt(d,u.map(c=>c.id),f.size.width,f.size.height,G*3);return f.size=y,{...f,size:y}}else return{...f,size:_t(f.size)}});ie.set(a(l)),Ne.set(n);function r(d){Ce[d?"unshift":"push"](()=>{s=d,i(0,s)})}return[s,r,d=>s.addNode()]}class _i extends we{constructor(e){super(),ke(this,e,hi,di,be,{})}}export{_i as component,gi as universal};
